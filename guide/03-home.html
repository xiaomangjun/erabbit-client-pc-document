<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>首页模块 | 小兔鲜儿</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/erabbit-client-pc-document/hero.png">
    <meta name="description" content="小兔鲜儿PC前台-开发文档">
    
    <link rel="preload" href="/erabbit-client-pc-document/assets/css/0.styles.fcf294a2.css" as="style"><link rel="preload" href="/erabbit-client-pc-document/assets/js/app.89bf0df2.js" as="script"><link rel="preload" href="/erabbit-client-pc-document/assets/js/2.9c06a25d.js" as="script"><link rel="preload" href="/erabbit-client-pc-document/assets/js/6.9b8cde68.js" as="script"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/10.23f3a92a.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/11.cf97a071.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/12.f9a4116d.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/13.f58063eb.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/14.d227b963.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/15.88e2a02b.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/16.45accc32.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/17.0cb643a4.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/18.fa9f9a42.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/19.a594d642.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/3.21cc2c59.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/4.896e02af.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/5.3b03a454.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/7.121c8ae9.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/8.cfcf90da.js"><link rel="prefetch" href="/erabbit-client-pc-document/assets/js/9.a79a3e96.js">
    <link rel="stylesheet" href="/erabbit-client-pc-document/assets/css/0.styles.fcf294a2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/erabbit-client-pc-document/" class="home-link router-link-active"><img src="/erabbit-client-pc-document/hero.png" alt="小兔鲜儿" class="logo"> <span class="site-name can-hide">小兔鲜儿</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/erabbit-client-pc-document/guide/00-vue3pre.html" class="nav-link">
  vue3前置
</a></div><div class="nav-item"><a href="/erabbit-client-pc-document/guide/01-intro.html" class="nav-link">
  项目介绍
</a></div><div class="nav-item"><a href="/erabbit-client-pc-document/guide/02-started.html" class="nav-link">
  项目起步
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能模块" class="dropdown-title"><span class="title">功能模块</span> <span class="arrow down"></span></button> <button type="button" aria-label="功能模块" class="mobile-dropdown-title"><span class="title">功能模块</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/03-home.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  首页模块
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/04-category.html" class="nav-link">
  分类模块
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/05-detail.html" class="nav-link">
  商品详情
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/06-login.html" class="nav-link">
  登录模块
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/07-cart.html" class="nav-link">
  购物车
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/08-pay.html" class="nav-link">
  结算&amp;支付
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/09-member.html" class="nav-link">
  个人中心
</a></li></ul></div></div><div class="nav-item"><a href="/erabbit-client-pc-document/guide/10-end.html" class="nav-link">
  项目总结
</a></div> <a href="https://gitee.com/xmangojun/" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/erabbit-client-pc-document/guide/00-vue3pre.html" class="nav-link">
  vue3前置
</a></div><div class="nav-item"><a href="/erabbit-client-pc-document/guide/01-intro.html" class="nav-link">
  项目介绍
</a></div><div class="nav-item"><a href="/erabbit-client-pc-document/guide/02-started.html" class="nav-link">
  项目起步
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="功能模块" class="dropdown-title"><span class="title">功能模块</span> <span class="arrow down"></span></button> <button type="button" aria-label="功能模块" class="mobile-dropdown-title"><span class="title">功能模块</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/03-home.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  首页模块
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/04-category.html" class="nav-link">
  分类模块
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/05-detail.html" class="nav-link">
  商品详情
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/06-login.html" class="nav-link">
  登录模块
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/07-cart.html" class="nav-link">
  购物车
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/08-pay.html" class="nav-link">
  结算&amp;支付
</a></li><li class="dropdown-item"><!----> <a href="/erabbit-client-pc-document/guide/09-member.html" class="nav-link">
  个人中心
</a></li></ul></div></div><div class="nav-item"><a href="/erabbit-client-pc-document/guide/10-end.html" class="nav-link">
  项目总结
</a></div> <a href="https://gitee.com/xmangojun/" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>首页模块</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/erabbit-client-pc-document/guide/03-home.html#_01-首页-路由与组件" class="sidebar-link">01-首页-路由与组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_02-首页-less的自动化导入" class="sidebar-link">02-首页-less的自动化导入</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_03-首页-样式重置与公用" class="sidebar-link">03-首页-样式重置与公用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_04-首页-顶部通栏布局" class="sidebar-link">04-首页-顶部通栏布局</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_05-首页-头部布局" class="sidebar-link">05-首页-头部布局</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_06-首页-底部布局" class="sidebar-link">06-首页-底部布局</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_07-首页-头部分类导航组件" class="sidebar-link">07-首页-头部分类导航组件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_08-首页-头部分类导航渲染" class="sidebar-link">08-首页-头部分类导航渲染</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_09-首页-头部分类导航交互" class="sidebar-link">09-首页-头部分类导航交互</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_10-首页-吸顶头部组件-传统实现" class="sidebar-link">10-首页-吸顶头部组件-传统实现</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_11-首页-吸顶头部组件-组合api" class="sidebar-link">11-首页-吸顶头部组件-组合API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_12-首页主体-左侧分类-结构渲染" class="sidebar-link">12-首页主体-左侧分类-结构渲染</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_13-首页主体-左侧分类-弹层展示" class="sidebar-link">13-首页主体-左侧分类-弹层展示</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_14-首页主体-左侧分类-处理品牌" class="sidebar-link">14-首页主体-左侧分类-处理品牌</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_15-首页主体-左侧分类-骨架效果" class="sidebar-link">15-首页主体-左侧分类-骨架效果</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_16-首页主体-轮播图-基础布局" class="sidebar-link">16-首页主体-轮播图-基础布局</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_17-首页主体-轮播图-渲染结构" class="sidebar-link">17-首页主体-轮播图-渲染结构</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_18-首页主体-轮播图-逻辑封装" class="sidebar-link">18-首页主体-轮播图-逻辑封装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_19-首页主体-面板封装" class="sidebar-link">19-首页主体-面板封装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_20-首页主体-新鲜好物" class="sidebar-link">20-首页主体-新鲜好物</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_21-首页主体-人气推荐" class="sidebar-link">21-首页主体-人气推荐</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_22-首页主体-补充-vue动画" class="sidebar-link">22-首页主体-补充-vue动画</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_23-首页主体-面板骨架效果" class="sidebar-link">23-首页主体-面板骨架效果</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_24-首页主体-组件数据懒加载" class="sidebar-link">24-首页主体-组件数据懒加载</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_25-首页主体-热门品牌" class="sidebar-link">25-首页主体-热门品牌</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_26-首页主体-图片懒加载" class="sidebar-link">26-首页主体-图片懒加载</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_27-首页主体-商品区块" class="sidebar-link">27-首页主体-商品区块</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/erabbit-client-pc-document/guide/03-home.html#_28-首页主体-最新专题" class="sidebar-link">28-首页主体-最新专题</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="首页模块"><a href="#首页模块" class="header-anchor">#</a> 首页模块</h1> <h2 id="_01-首页-路由与组件"><a href="#_01-首页-路由与组件" class="header-anchor">#</a> 01-首页-路由与组件</h2> <blockquote><p><strong>目的：</strong> 搭建页面架子，便于接下来进行页面布局组件编写。</p></blockquote> <p>大致步骤：</p> <ol><li>App.vue 一级路由占位</li> <li>根据效果分析一级路由公共部分，并预留二级路由占位</li> <li>一级路由和二级路由的路径和组件映射关系配置。</li></ol> <ul><li>根组件下定义一级路由组件出口 <code>src/App.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 一级路由 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterView</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>一级路由布局容器 <code>src/views/Layout.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>顶部通栏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>头部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 二级路由 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterView</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterView</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>底部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xtx-layout'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>二级路由首页组件 <code>src/views/home/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>xtx-home-page<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    首页
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'xtx-home-page'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>配置路由规则 <code>src/router/index.js</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>import { createRouter, createWebHashHistory } from 'vue-router'

<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const Layout = () =&gt; import('@/views/Layout')
</span><span class="token prefix inserted">+</span><span class="token line">const Home = () =&gt; import('@/views/home/index')
</span></span>
const routes = [
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  {
</span><span class="token prefix inserted">+</span><span class="token line">    path: '/',
</span><span class="token prefix inserted">+</span><span class="token line">    component: Layout,
</span><span class="token prefix inserted">+</span><span class="token line">    children: [
</span><span class="token prefix inserted">+</span><span class="token line">      { path: '/', component: Home }
</span><span class="token prefix inserted">+</span><span class="token line">    ]
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>]

const router = createRouter({
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> history: createWebHashHistory(),
</span><span class="token prefix unchanged"> </span><span class="token line"> routes
</span></span>})

export default router
</code></pre></div><p><strong>总结：</strong>  配置首页的路由规则，由Layout和首页组件组成。</p> <h2 id="_02-首页-less的自动化导入"><a href="#_02-首页-less的自动化导入" class="header-anchor">#</a> 02-首页-less的自动化导入</h2> <blockquote><p><strong>目的：</strong> 准备常用less变量，混入代码，完成自动导入。</p></blockquote> <p>大致步骤：</p> <ol><li>准备需要自动化导入的 less 文件</li> <li>下载插件</li> <li>添加配置自动化导入的相关配置</li> <li>重启开发服务器</li></ol> <p><strong>1）准备要用的变量和混入代码</strong></p> <ul><li>变量 <code>src/assets/styles/variables.less</code></li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// 主题</span>
<span class="token variable">@xtxColor<span class="token punctuation">:</span></span>#27BA9B<span class="token punctuation">;</span>
<span class="token comment">// 辅助</span>
<span class="token variable">@helpColor<span class="token punctuation">:</span></span>#E26237<span class="token punctuation">;</span>
<span class="token comment">// 成功</span>
<span class="token variable">@sucColor<span class="token punctuation">:</span></span>#1DC779<span class="token punctuation">;</span>
<span class="token comment">// 警告</span>
<span class="token variable">@warnColor<span class="token punctuation">:</span></span>#FFB302<span class="token punctuation">;</span>
<span class="token comment">// 价格</span>
<span class="token variable">@priceColor<span class="token punctuation">:</span></span>#CF4444<span class="token punctuation">;</span>
</code></pre></div><ul><li>混入 <code>src/assets/styles/mixins.less</code></li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// 鼠标经过上移阴影动画</span>
<span class="token selector">.hoverShadow ()</span> <span class="token punctuation">{</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span><span class="token operator">-</span>3px<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 3px 8px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>less混入就是，申明一段css代码（选择器包裹的代码）或者函数，在其他css选择器调用，可复用包裹的代码。</p> <p><strong>2）完成自动注入公用变量和混入</strong></p> <p><strong>遇到问题：</strong> 每次使用公用的变量和mixin的时候需要单独引入到文件中。</p> <p><img src="/erabbit-client-pc-document/assets/img/1605606221089.1ae81350.png" alt="1605606221089"></p> <p><strong>解决方法：</strong> 使用vuecli的style-resoures-loader插件来完成自动注入到每个less文件或者vue组件中style标签中。</p> <ul><li>在当前项目下执行一下命令<code>vue add style-resources-loader</code>，添加一个vuecli的插件</li></ul> <p><img src="/erabbit-client-pc-document/assets/img/1605607316835.2f409ff6.png" alt="1605607316835"></p> <ul><li>安装完毕后会在<code>vue.config.js</code>中自动添加配置，如下：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... 其他配置</span>
  <span class="token literal-property property">pluginOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'style-resources-loader'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">preProcessor</span><span class="token operator">:</span> <span class="token string">'less'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">patterns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>把你需要注入的文件配置一下后，重启服务即可。</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">const path = require('path')
</span></span>module.exports = {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> pluginOptions: {
</span><span class="token prefix unchanged"> </span><span class="token line">   'style-resources-loader': {
</span><span class="token prefix unchanged"> </span><span class="token line">     preProcessor: 'less',
</span><span class="token prefix unchanged"> </span><span class="token line">     patterns: [
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        path.join(__dirname, './src/assets/styles/variables.less'),
</span><span class="token prefix inserted">+</span><span class="token line">        path.join(__dirname, './src/assets/styles/mixins.less')
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     ]
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><p><strong>总结：</strong>  知道如何定义less变量和混入代码并使用他们，通过vue-resources-loader完成代码注入再每个less文件和vue组件中。</p> <h2 id="_03-首页-样式重置与公用"><a href="#_03-首页-样式重置与公用" class="header-anchor">#</a> 03-首页-样式重置与公用</h2> <blockquote><p><strong>目的：</strong> 准备网站所需的重置样式代码，以及一些公用样式代码。</p></blockquote> <p>大致步骤：</p> <ol><li>安装并导入重置样式的包</li> <li>准备并导入项目公共样式</li></ol> <ul><li>重置样式</li></ul> <p>安装重置样式的包</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i normalize.css
或
<span class="token function">yarn</span> <span class="token function">add</span> normalize.css
</code></pre></div><p>然后在 <code>main.js</code> 导入 <code>normalize.css</code> 即可。</p> <div class="language-diff extra-class"><pre class="language-diff"><code>import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import 'normalize.css'
</span></span>
createApp(App).use(store).use(router).mount('#app')
</code></pre></div><ul><li>公用样式</li></ul> <p>新建文件 <code>src/assets/styles/common.less</code> 在该文件写入常用的样式，然后在 <code>main.js</code> 导入即可。</p> <p><code>src/assets/styles/common.less</code></p> <div class="language-less extra-class"><pre class="language-less"><code><span class="token comment">// 重置样式</span>
<span class="token selector">*</span> <span class="token punctuation">{</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">html</span> <span class="token punctuation">{</span>
   <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
   <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token selector">body</span> <span class="token punctuation">{</span>
   <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
   <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
   <span class="token property">min-width</span><span class="token punctuation">:</span> 1240px<span class="token punctuation">;</span>
   <span class="token property">font</span><span class="token punctuation">:</span> 1em<span class="token operator">/</span>1.4 <span class="token string">'Microsoft Yahei'</span><span class="token punctuation">,</span> <span class="token string">'PingFang SC'</span><span class="token punctuation">,</span> <span class="token string">'Avenir'</span><span class="token punctuation">,</span> <span class="token string">'Segoe UI'</span><span class="token punctuation">,</span> <span class="token string">'Hiragino Sans GB'</span><span class="token punctuation">,</span> <span class="token string">'STHeiti'</span><span class="token punctuation">,</span> <span class="token string">'Microsoft Sans Serif'</span><span class="token punctuation">,</span> <span class="token string">'WenQuanYi Micro Hei'</span><span class="token punctuation">,</span> sans<span class="token operator">-</span>serif
 <span class="token punctuation">}</span>
 
 <span class="token selector">ul,
 h1,
 h3,
 h4,
 p,
 dl,
 dd</span> <span class="token punctuation">{</span>
   <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
   <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">a</span> <span class="token punctuation">{</span>
   <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
   <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
   <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">i</span> <span class="token punctuation">{</span>
   <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">input[type=&quot;text&quot;],
 input[type=&quot;search&quot;],
 input[type=&quot;password&quot;], 
 input[type=&quot;checkbox&quot;]</span><span class="token punctuation">{</span>
   <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
   <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
   <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
   <span class="token property">-webkit-appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
   <span class="token selector">&amp;::placeholder</span><span class="token punctuation">{</span>
     <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">img</span> <span class="token punctuation">{</span>
   <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
   <span class="token property">max-height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
   <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">ul</span> <span class="token punctuation">{</span>
   <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">#app</span> <span class="token punctuation">{</span>
   <span class="token property">background</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">.container</span> <span class="token punctuation">{</span>
   <span class="token property">width</span><span class="token punctuation">:</span> 1240px<span class="token punctuation">;</span>
   <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
   <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">.ellipsis</span> <span class="token punctuation">{</span>
   <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
   <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">.ellipsis-2</span> <span class="token punctuation">{</span>
   <span class="token property">word-break</span><span class="token punctuation">:</span> break<span class="token operator">-</span>all<span class="token punctuation">;</span>
   <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
   <span class="token property">display</span><span class="token punctuation">:</span> <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token punctuation">;</span>
   <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical<span class="token punctuation">;</span>
   <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
   <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">.fl</span> <span class="token punctuation">{</span>
   <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">.fr</span> <span class="token punctuation">{</span>
   <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token selector">.clearfix:after</span> <span class="token punctuation">{</span>
   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>
   <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
   <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
   <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
   <span class="token property">line-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
   <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><p><code>src/main.js</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code>import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'

import 'normalize.css'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import '@/assets/styles/common.less'
</span></span>
createApp(App).use(store).use(router).mount('#app')
</code></pre></div><p><strong>总结：</strong> 重置样式使用normalize.css，项目公用样式common.less</p> <h2 id="_04-首页-顶部通栏布局"><a href="#_04-首页-顶部通栏布局" class="header-anchor">#</a> 04-首页-顶部通栏布局</h2> <blockquote><p><strong>目的：</strong> 完成顶部通栏组件。</p></blockquote> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQIAAABBCAYAAACKLdmkAAAR8UlEQVR4nO3dPWgj637H8d+53E5ZOMYYFkxgnMIQrCJGcFiIEPg2N2Ab0k0TCSIWbmFEIAmWuhRpPAsJBLPFATOFlWa6gOVAmrMgVBwCQim8jUOyEy4LC47xAUeHS1JsipnRvOrNltbyzvfTnLN6m/GjmbGf3/yf5/nm8+fPnwUAAAAAAADgq/aLp94BAAAAAAAAAMtHEAgAAAAAAADkwC///T/+66n3AQAAAAAAAMCSfVMqlZgjEAAAAAAAAPjKMTQYAAAAAAAAyAGCQAAAAAAAACAHCAIBAAAAAACAHCAIBAAAAAAAAHKAIBAAAAAAAADIAYJAAAAAAAAAIAcIAgEAAAAAAIAcIAgEAAAAAAAAcoAgEAAAAAAAAMgBgkAAAAAAAAAgBwgCAQAAAAAAgBwgCAQAAAAAAABygCAQAAAAAAAAyAGCQAAAAAAAACAHCAIBAAAAAACAHCAIBAAAAAAAAHKAIBAAAAAAAADIAYJAAAAAAAAAIAcIAgEAAAAAAIAc+OVT7wAAAADwNSqVSpKkfr//xHvydaJ9l4v2XS7ad7lo3+VaXPsW9Ku/+nv95rtvx77ip3/9Xn/5dz9o+MgtIUQQCAAAgIerWbJfXqj+ppf5nFO50+nrE2U8K0kqH9tqrL+T2WxLqspyiroym2pPen2pEH/wfqDT7poao22V1TpraK1rqnk+5b0pQw3e1nXSnfKyp1BpyT7a1vUD9q9qOdq7PfW+p0pLdk2yM76X8rGtuuyM77Mqy9nT3dhte22++yJ8ZNj3tle1HB0YkZfeDyYeE08lPD5cdcwLbZ7VpfO6Pu47OjBcdVLH5Zg2qbRkH63pXdZxXLPk7Fz5x/tsx6R7GTmOE++P7H3mMb+aqrKcAxlTjwP/dRM/K+t7yfqcScfumHdFz5mVl/Ez1iw5+9HWm/XaNm97ff3tW7UcFd9nn1vZz81y7Aayv5f5r0cKf+eeS/Vx16CVs6vv/vB/9cNfm/r+txlP//5vdPo332lXPzzgd0bi91LqmpP4m6PSkn20q9gVOfme0d81H3U46bgPzr8V/X1HEAgAAICHO7/Q9VlD9rFU/3SY6HhKkqGG46gx+ne0A1NWebsgtzt7V6X3ph75g9r7I3/7uqfeuVSuNEbbci9NXbhlKfLq+HuzlNU6q8+8L19WVZbfQdk9cuQcRZ7K6GikwjdJMhpynPCbiH4vo7Dpx2vdHDXkWFuJsKmt5mVRzpGlandc5zLs0HqBYmj0+TVLTmXOH31pEp1EtyPTbIfP+f/XbppqqyrLcWTFQrmijPtrXSQ78K+2pb6d3UbnTXUsR87ZpvedpY7JKaFK8v2Rn+NZhIB+R/vm0tTpS1sNx9LWxLBiUtDndeKXpd081eZZXa1KbzVvDGSE78bo2uCqc6nw2uCHF73g58gKPNxORsC8PKvfvqH25UD2kSP7ZSK4rFk6WB/oNHXetdU0s8J6L8yb6WbKvNcjldWqGHK7TfW6Uk8t2Y4lmVcqJkLJ4CbN6vhZP2eFgJL025/1s9bGvzUVeEcNNXhrypzn+Ir+PvVvmk017nwym3Ns+MsiCAQAAMAj9HTyekuWc6iq2ZQZ7RBNqwisHXqdnn1Hzn74sOE4Ooi9MAyYqpbjdbxe91Q+a2hXA536HZqT83KsEqtqNdSolcPtT+wwRLY1bxMsXVC1YCrarfAqRm7UyWhfr7MY+YRo1UqsItAPkfzX9bon6nW9MKpV29T2fqJzI+kg+v2saLXDbHo6ee3vec2SsxN/7uNtQ0VDUldKduzDoDUMur3O9ZYOSwUVFA9doyFLu2lKlqP6cVm9mTvjydBnNxGwKzyPVvQ78drM65h7QUhdOrbVcBwVLxcUYk44x41kgK5EtWVKTyfdQzm1lsrd1WvP2PE7piLwIHhuf0ODt83EzxAJWVPH/40+TqpyyvD1tW9E90R1w5Kzf6iqemH1WGa7PtTDr0eSpEpZ2y9cvQtuuOxcyTRPvOcir03epHn2zhN/d0iaOrogEdwZjqOD+6xAdw4ret0dhyAQAAAAj9RW05SyKlRSFYGjQKQqa99IdBSnDw1uN021a5YXsty7cjMCkSCoGvZPZTYjf5ZndhiiVrAiMNLxTgekklSI/bxhlUfG0DQjHrjGKgJH7/Haf9TJnCfYfW5SoYYhx0m0cKLNJC/cuFI85Ag611XrQBv9U5mJqqF4pz4d1M4mOYQw43yZtYLlCwqGOKbORwVVul51k7OfVf1nxIPnFFdXyYcyh/+lqyyrlqOsesJYaH7eVGfH0WFN6p1755QWFVouQHJoeRDGDfunqn/yH6x80MXbTdWPHFnG5H2Pfl70ehO7tuSofbMqvZLHY7RCe3LwOcUjrkfNc6m6v6uC23kGQ4FXQPdE9a78Nld43am0vq6QdAKCQAAAADxMpJMUdBTDChVNDI7Kx3sy3M6UYG7MNveNyUOb/A7VzacJodgkfsfuUZ26Rai0ZFfuNHANrUXnoMqY4y9V5VHZ1EakCm18RWD0PR905x7owLG1uarzJC5SNBjOmHtv/HyJUtXK+Lztug5euOo0Jx+Xkh44DLOQHhaujID4flVqWv3zzu3INCXLSVRJRt0P/Dm3HDmjoClreOWyhMOrk8Fi27vLIamti/6eGjtVaUXilnBoeVZF4KH3325PPfWkV7YalZbK58F5nwhZ3atIMBsGzIupIHue7TsKjGKm37B6kEdcj1SzvApld5E79ExkDcv1pW+exW82VHce2GgvdtVwdr1tHNlqXV77jyWqtLWKw7A9BIEAAAB4GL+T5HVQtjKqAaX0HIF+wDZ1vr4Mo7v3HRUnhQreVqQdR47jby8zUHjYJPdfjN++VcuJz5BkrKlwezW5/Yw1FYzdeEXJhIrAoMrnpOst7rH3qix1Z/yGoh2xWFAV+Y5i2/aOicOnDlrnNGnBAEnStS3zjdQ6s9WKzANWfrnh/U/Q0c+oEJzNc6sIjAd5s4R6veicaJnXkwyLGJIXHVaZFfIG+/fmnQ6dPbUq7RW4ZqRvcKTmCJRUthw1/BcN+71IO00aGhzaWi9It4/c1WfZvg80IZiSlLhGhua98RRej7yh3647nP1m19fkwWFt1RtqLSO8+TXrNpPXnEpL9r0rV4YUmau1ajkqflq9EFAiCAQAAMBCfNDJazOxCnBUNHSbXKGXPQTW67R6FRNVWTMsInDVjM6pN25BhYK2Y6HXkqo9HsnYTw4JSw8bG/Yj/4hUl6QCrGRFYCI8CoetZn1PRsYiIyeqd+MT4UerV2LbX9HhxeWXG5JxELap25H5/kaNnS1JvXBuysixk/xOvPYP5syMD8Mc3n5YwF4+t4rAWVfqjosGIlPDkQUtPlN+ta2C+86bW3TiK9u6cg90sF+V5ljkaDn8oLVmydnfiITE3rV28+WNJKnXNGcPOCSvmvj+TtEj9uaRYcbzbN+H/55KB1PS9MVCIq+c53pU2ZT6ti5UV2N99p8u78rHe9roD+SW1nRlXqnoWKq+vZvtzaPqP//mjCTpTlfXG9p7GSxSVlXRcHW1ouuFEAQCAABgsaIdmJihvD+zE0P+ksFUxrCoxwsDGmcnPiyzUPIngB+taHqqDxX5k7KvhjAQyQ4qM4fvRStTMuaWigZ6w/7pKJirWo72bk9Vf5P4nlY0xHuwZOVOcrhupaXhvn8sZ1SdZc0R6PHmzLQcS9XzphYRAXqeW0VgxkrdlVZsQZ+5zPreMUP0MhezeC/Nu3p5+72rg/2iVmEAa3R18GRIbJQKSi9mE/020kODvYfXVNCEQCQ37Zs9ND0Itxc+dcRDr0fdEzW7Uvk4L7PbRUypvswOayX3siOVpOu3H7VWWtNonuOapYNp1faS/918COcU9s+ZDz9ea+/I+3viw/GeDPedVjQHJAgEAADAgmXOf+ZVqWSaZahr+k3zLyLgd+yqlq3WcVG765KroQb9YAL46IqmqyOcQytcjEKWI/s27Nh7gUtZrTNHa//tytgypPuhhrNUTsaer6poDHV9OW/Ut6W1Fze6SrVdWZvrQ92t4txV0SFlE4ZGhgHK+HnO0oIFdKTyhFeVj20dfqrPECgk5t8cJ3OY3Kooq1WLBnmzV0iNJCrVsl8z52IW0WGrEwWfY2tw31CxpvhiOk+g3TT9GxjRdk3/vNnz/GUPDS6/3NDw+mL89ThH7ZtSaaleulHHtLV55gX9CwsrH3E9ek5TLCzU2Ovd9FWDrb6tk+6WrEh4Xd0xNLy9yNxUcIPM1kb2vtx+VK/b1ta+oz3L0p5xo84Xm+N0fgSBAAAAWIiqZWnzVjNUBMbe5a8ePOm+ebLD01bT/JAdIkyrWqu0tGcUVFi/9hcn2JN+bOpUthrb1+qtcohy1tDubUfmm56q1rj5EYe6++emmqMhgtF1O2cY9lwryri/1sW87VAryri/U6oLVSlr+8WN3q1su2YJ56cb3g9VWPeG43lhpx9qzjHHX/Yca5tqnTnafeGqY2a9KyK1mmjc+KqX1QoIyseHUiw4Cap0bbU0PQys7u+q8EJqOLbK4+b1nLoyeCgM2OcJT2/0sdtTe9b5M1fc5rEtZzR025B9vKmbknT9drQMkTajw03z3L6RIdhtSQqmAFj6eTbD9ejZ+1bGn9fHLEqzqW/1f4vdnF9FKW1FHpx+E+zmU09bO43UVA/RALHd7KjoeDfsVjcGJAgEAADAI22tF1QwGtrrn8pWXbuzVgT6Acewf6r61I5UssPT08l5WfZRZC62UUetmQ4BR0OIXHXMcA68w+DT3tTVq1lyHEf1VVvlL9JO5qT9SoVuYVVaNEwaBUf3A52a8baq7hiTq4HGqO4Ycrvpdi+/2pb69kp3iGL8dnIvTT/w8Drh9vEH1X/c1Ib8qsf9cXMEJnlBys37sGW8+b8M7zx5PUPLjA1fVnM+y0w1S42SIZWSw0ddv7oqPqdirAJydOwGFWxVb4j/keQNl8443x9pYzTPV/RnGBN2r6zogitDDYJwLzKcclunMs346uob/VM/JJGWFTY9q/YN2it1vQxuSDly9idVXge2tPZCkwZdp816PZrDQhZ/WbhvVfyTX3sVpPcDff8XA/3xP9RVDBYL+gLznlYtb4Xz5pj5Hb1APBoW+rXeRkt7hqt3zZ4/bFwavO1IRw05Z+WVnUqDIBAAAACP4A39DOYuS85TFFss4H7gVZoFHSu3I9PMqAR078K5kAL3A52qJdtJzwdUSAQyybmy3H8baOOP1vTODwDL0SqYYJ+kUeBStRw5TmMFKqr8yeozAjtvHq30yslDvwohOneYJG+4drKtKy3ZsfnDtiKdnHET5WetAt2R1ge6GIWxhv+4VN65lj3qIPlt7s47DHx5ou3kXjalcyVCt55OXkuts4acUqR9NWGOwGQF3318kZGt9cT8Yhlzg2V3Rp+pSkv2zlX2uR44L8uutVQ+P1Eveeyljt3o3G3ecHjnaJYgZjbjzi3JO0ZW5dgdGTs8csxw8jGvD6YdqL/pZV+3F+TZtG8sADTH7FfQxn44nZrHM7H69ZS2fOj1aJr4oj1DDeae+mGZftLwd5KCNnpRlPm3WypEVwz/3VA/Tf2c9HVj5vn5Kl6YlxrK2/2om6MDNZxdSa467qb2EhXzazvbUv9aRcfRgduRGXxGt+21+6QK5if0TalU+vzUOwEAAAB8bUqlkiSp388sFcMj0b7LRfsuF+27XLTvci2yfQs7v9af/emv9Ae/l/Hk//ynfvinf9S/vB8+ejsIEQQCAAAAAAAAOfCLp94BAAAAAAAAAMtHEAgAAAAAAADkAEEgAAAAAAAAkAMEgQAAAAAAAEAOEAQCAAAAAAAAOUAQCAAAAAAAAOQAQSAAAAAAAACQAwSBAAAAAAAAQA4QBAIAAAAAAAA5QBAIAAAAAAAA5ABBIAAAAAAAAJADBIEAAAAAAABADhAEAgAAAAAAADlAEAgAAAAAAADkAEEgAAAAAAAAkAMEgQAAAAAAAEAOEAQCAAAAAAAAOUAQCAAAAAAAAOTAN58/f/781DsBAAAAAAAAYLmoCAQAAAAAAABygCAQAAAAAAAAyAGCQAAAAAAAACAHCAIBAAAAAACAHCAIBAAAAAAAAHKAIBAAAAAAAADIAYJAAAAAAAAAIAf+H3v3+dG31tnWAAAAAElFTkSuQmCC" alt="1616335492457"></p> <p>大致步骤：</p> <ol><li>引入字体图标文件</li> <li>样式结构布局准备</li> <li>组件封装抽离</li> <li>导入注册使用</li></ol> <p>步骤：</p> <p>1）在 <code>public/index.html</code> 引入字体图标文件。</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;//at.alicdn.com/t/font_2143783_iq6z4ey5vu.css&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;
</span></span></code></pre></div><p>2）在 <code>src/components/</code>  下新建 <code>app-topnav.vue</code>  组件，基础布局如下：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-topnav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>周杰伦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请先登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>免费注册<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>我的订单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>会员中心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>帮助中心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于我们<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-phone<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>手机版<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppTopnav'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-topnav</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token selector">ul</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 53px<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">li</span> <span class="token punctuation">{</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #cdcdcd<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token selector">i</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
          <span class="token property">margin-right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
          <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">~ li</span> <span class="token punctuation">{</span>
        <span class="token selector">a</span> <span class="token punctuation">{</span>
          <span class="token property">border-left</span><span class="token punctuation">:</span> 2px solid #666<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3）在 <code>src/views/Layout.vue</code> 中导入使用。</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;AppTopnav/&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;header&gt;头部&lt;/header&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;main&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 二级路由 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;router-view&gt;&lt;/router-view&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/main&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;footer&gt;底部&lt;/footer&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line"> import AppTopnav from '@/components/app-topnav.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'XtxLayout',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { AppTopnav }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">style scoped lang=&quot;less&quot;&gt;&lt;/style&gt;
</span></span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>    
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppTopnav'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> profile <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
          <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>profile
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> profile <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 完成基础布局。</p> <h2 id="_05-首页-头部布局"><a href="#_05-首页-头部布局" class="header-anchor">#</a> 05-首页-头部布局</h2> <blockquote><p><strong>目的：</strong> 完成首页头部布局，了解结构。</p></blockquote> <p><img src="/erabbit-client-pc-document/assets/img/1616335520936.0e870693.png" alt="1616335520936"></p> <p>大致步骤：</p> <ul><li>1）在 <code>src/components/</code>  下新建 <code>app-header.vue</code>  组件，基础布局如下：</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>app-header<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>小兔鲜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美食<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>餐厨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>艺术<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>电器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>居家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>洗护<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>孕婴<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>服装<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>杂货<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-search<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>搜一搜<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>curr<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-cart<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppHeader'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-header</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.logo</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 132px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">text-indent</span><span class="token punctuation">:</span> -9999px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>~@/assets/images/logo.png<span class="token punctuation">)</span></span> no-repeat center 18px / contain<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.navs</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 820px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token selector">li</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token selector">a</span> <span class="token punctuation">{</span>
          <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
          <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.search</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 170px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #e7e7e7<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token selector">.icon-search</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">input</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 140px<span class="token punctuation">;</span>
      <span class="token property">padding-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.cart</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token selector">.curr</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token selector">.icon-cart</span><span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">em</span> <span class="token punctuation">{</span>
        <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 1px 6px<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@helpColor</span><span class="token punctuation">;</span></span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">font-family</span><span class="token punctuation">:</span> Arial<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>2）在 <code>src/views/Layout.vue</code> 中导入使用。</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;AppTopnav/&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;AppHeader/&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;main&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 二级路由 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;router-view&gt;&lt;/router-view&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/main&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;footer&gt;底部&lt;/footer&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import AppTopnav from '@/components/app-topnav.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import AppHeader from '@/components/app-header.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'XtxLayout',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { AppTopnav, AppHeader }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">style scoped lang=&quot;less&quot;&gt;&lt;/style&gt;
</span></span>
</code></pre></div><p><strong>总结：</strong> 准备了一个静态的头部组件，了解其结构。</p> <h2 id="_06-首页-底部布局"><a href="#_06-首页-底部布局" class="header-anchor">#</a> 06-首页-底部布局</h2> <blockquote><p><strong>目的：</strong> 完成首页底部布局。</p></blockquote> <p><img src="/erabbit-client-pc-document/assets/img/1616335541641.31a11f9f.png" alt="1616335541641"></p> <p>首先，在 <code>src/components/</code>  下新建 <code>app-footer.vue</code>  组件，基础布局如下：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 联系我们 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contact<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span>客户服务<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-kefu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 在线客服<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-question<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 问题反馈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span>关注我们<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-weixin<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 公众号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-weibo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 微博<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span>下载APP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>qrcode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@/assets/images/qrcode.jpg<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>扫描二维码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>立马下载APP<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>下载页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span>服务热线<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hotline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>400-0000-000 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>周一至周日 8:00-18:00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 其它 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extra<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slogan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-footer01<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>价格亲民<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-footer02<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>物流快捷<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-footer03<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>品质新鲜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 版权信息 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copyright<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>关于我们<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>帮助中心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>售后服务<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>配送与验收<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>商务合作<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>搜索推荐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>友情链接<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>CopyRight © 小兔鲜儿<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppFooter'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-footer</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token selector">.contact</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token selector">.container</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 60px 0 40px 25px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">dl</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 190px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 72px<span class="token punctuation">;</span>
      <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #f2f2f2<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token selector">&amp;:first-child</span> <span class="token punctuation">{</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
        <span class="token property">border-right</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token property">padding-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">dt</span> <span class="token punctuation">{</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">dd</span> <span class="token punctuation">{</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 36px 12px 0 0<span class="token punctuation">;</span>
      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 92px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 92px<span class="token punctuation">;</span>
      <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ededed<span class="token punctuation">;</span>
      <span class="token selector">.iconfont</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token selector">.iconfont</span> <span class="token punctuation">{</span>
          <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.qrcode</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 92px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 92px<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 7px<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ededed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.download</span> <span class="token punctuation">{</span>
      <span class="token property">padding-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token selector">span</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 10px 25px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.hotline</span> <span class="token punctuation">{</span>
      <span class="token property">padding-top</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
      <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token selector">small</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.extra</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.slogan</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 178px<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 60px 100px<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #434343<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 58px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span>
      <span class="token selector">i</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">span</span> <span class="token punctuation">{</span>
        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
        <span class="token property">text-shadow</span><span class="token punctuation">:</span> 0 0 1px #333<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.copyright</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 170px<span class="token punctuation">;</span>
    <span class="token property">padding-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
    <span class="token selector">p</span> <span class="token punctuation">{</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
      <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #999<span class="token punctuation">;</span>
      <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
        <span class="token property">border-right</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>最后，在 <code>src/views/Layout.vue</code> 中导入使用。</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;AppTopnav/&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;AppHeader/&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;main class=&quot;app-body&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 二级路由 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;router-view&gt;&lt;/router-view&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/main&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;AppFooter/&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import AppTopnav from '@/components/app-topnav.vue'
import AppHeader from '@/components/app-header.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import AppFooter from '@/components/app-footer.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'XtxLayout',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { AppTopnav, AppHeader, AppFooter }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">style scoped lang=&quot;less&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">.app-body {
</span><span class="token prefix inserted">+</span><span class="token line">  min-height: 600px;
</span><span class="token prefix inserted">+</span><span class="token line">}
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/style&gt;
</span></span>
</code></pre></div><h2 id="_07-首页-头部分类导航组件"><a href="#_07-首页-头部分类导航组件" class="header-anchor">#</a> 07-首页-头部分类导航组件</h2> <blockquote><p><strong>目的：</strong> 提取头部分类导航组件，提供给头部，和将来的吸顶头部使用。</p></blockquote> <p><img src="/erabbit-client-pc-document/assets/img/1616335569363.6f17f458.png" alt="1616335569363"></p> <p>第一步：提取头部导航为一个组件</p> <ul><li>新建<code>src/components/app-header-nav.vue</code> 组件。</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美食<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>餐厨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>艺术<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>电器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>居家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>洗护<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>孕婴<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>服装<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>杂货<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppHeaderNav'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-header-nav</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 820px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
  <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 998<span class="token punctuation">;</span>
  <span class="token selector">&gt; li</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token selector">&gt; a</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
      <span class="token selector">&gt; a</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>在 <code>app-header.vue</code> 中使用组件。注意，删除结构和样式。</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;header class='app-header'&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;h1 class=&quot;logo&quot;&gt;&lt;RouterLink to=&quot;/&quot;&gt;小兔鲜&lt;/RouterLink&gt;&lt;/h1&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;AppHeaderNav /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;search&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;i class=&quot;iconfont icon-search&quot;&gt;&lt;/i&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;input type=&quot;text&quot; placeholder=&quot;搜一搜&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;cart&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;a class=&quot;curr&quot; href=&quot;#&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;i class=&quot;iconfont icon-cart&quot;&gt;&lt;/i&gt;&lt;em&gt;2&lt;/em&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/header&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import AppHeaderNav from './app-header-nav.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'AppHeader',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { AppHeaderNav }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><p>第二步：完善子级分类布局 <code>src/components/app-header-nav.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美食<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/img/category%20(4).png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>果干<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>餐厨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>艺术<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>电器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>居家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>洗护<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>孕婴<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>服装<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>杂货<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppHeaderNav'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-header-nav</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 820px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
  <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span> 
  <span class="token property">z-index</span><span class="token punctuation">:</span> 998<span class="token punctuation">;</span>  
  <span class="token selector">&gt; li</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> 
    <span class="token selector">&gt; a</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>  
      <span class="token selector">&gt; a</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token punctuation">}</span>
      <span class="token selector">// 子分类
      &gt; .layer</span> <span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 132px<span class="token punctuation">;</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
<span class="token selector">// 子分类
.layer</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1240px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> -200px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 56px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 5px #ccc<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all .2s .1s<span class="token punctuation">;</span>
  <span class="token selector">ul</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 70px<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 132px<span class="token punctuation">;</span>
    <span class="token selector">li</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 110px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">p</span> <span class="token punctuation">{</span>
        <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token selector">p</span> <span class="token punctuation">{</span>
          <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_08-首页-头部分类导航渲染"><a href="#_08-首页-头部分类导航渲染" class="header-anchor">#</a> 08-首页-头部分类导航渲染</h2> <blockquote><p><strong>目的：</strong> 实现头部一级分类和二级分类渲染。</p></blockquote> <p><strong>基本步骤：</strong></p> <ul><li>在API目录定义接口函数</li> <li>定义一个常量数据和后台保持一致（约定好9大分类），这样不请求后台就能展示一级分类，不至于白屏。</li> <li>在vuex中的category模块，基于常量数据定义state数据，定义修改分类列表函数，定义获取数据函数。</li> <li>在Layout组件获取调用actions获取数据，在头部导航组件渲染即可。</li></ul> <p><strong>落地代码：</strong></p> <ul><li>定义API函数  <code>src/api/category.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 定义首页需要的接口函数</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'@/utils/request'</span>

<span class="token comment">/**
 * 获取首页头部分类数据
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findAllCategory</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/category/head'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>定义九个分类常量数据 <code>src/api/constants.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 顶级分类</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> topCategory <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'居家'</span><span class="token punctuation">,</span>
  <span class="token string">'美食'</span><span class="token punctuation">,</span>
  <span class="token string">'服饰'</span><span class="token punctuation">,</span>
  <span class="token string">'母婴'</span><span class="token punctuation">,</span>
  <span class="token string">'个护'</span><span class="token punctuation">,</span>
  <span class="token string">'严选'</span><span class="token punctuation">,</span>
  <span class="token string">'数码'</span><span class="token punctuation">,</span>
  <span class="token string">'运动'</span><span class="token punctuation">,</span>
  <span class="token string">'杂项'</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>vuex在category模块，来存储分类数据，提供修改和获取的函数。 <code>src/store/modules/category.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 存储的分类数据</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> topCategory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/constants'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> findAllCategory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/category'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">namespaced</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果默认是[]数组，看不见默认的9个分类，等你数据加载完毕才会看到。</span>
      <span class="token comment">// 所以：根据常量数据来生成一个默认的顶级分类数据，不会出现空白（没数据的情况）</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> topCategory<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> item <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 加载数据成功后需要修改list所以需要mutations函数</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">setList</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> headCategory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      state<span class="token punctuation">.</span>list <span class="token operator">=</span> headCategory
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 需要向后台加载数据，所以需要actions函数获取数据</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">getList</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> result <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">findAllCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token comment">// 获取数据成功，提交mutations进行数据修改</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'setCategory'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>获取数据在 <code>src/views/Layout.vue</code>  初始化的时候</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'Layout',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: {
</span><span class="token prefix unchanged"> </span><span class="token line">   AppTopnav,
</span><span class="token prefix unchanged"> </span><span class="token line">   AppHeader,
</span><span class="token prefix unchanged"> </span><span class="token line">   AppFooter
</span><span class="token prefix unchanged"> </span><span class="token line"> },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  // 获取下分类数据
</span><span class="token prefix inserted">+</span><span class="token line">  setup () {
</span><span class="token prefix inserted">+</span><span class="token line">    const store = useStore()
</span><span class="token prefix inserted">+</span><span class="token line">    store.dispatch('category/getList')
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
</code></pre></div><ul><li>在头部导航组件渲染 <code>src/compotents/app-header-nav.vue</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppHeaderNav'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-nav<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub in item.children<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{sub.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong> 数据在vuex中管理，然后再组件使用数据进行渲染。</p> <h2 id="_09-首页-头部分类导航交互"><a href="#_09-首页-头部分类导航交互" class="header-anchor">#</a> 09-首页-头部分类导航交互</h2> <blockquote><p>目的：实现点击的时候跳转，且能关闭二级分类弹窗。</p></blockquote> <p>描述：由于是单页面路由跳转不会刷新页面，css的hover一直触发无法关闭分类弹窗。</p> <p>大致逻辑：</p> <ul><li>配置路由组件支持分类跳转</li> <li>鼠标进入一级分类展示对应的二级分类弹窗</li> <li>点击一级分类，二级分类，隐藏二级分类弹窗</li> <li>离开一级分类，二级分类，隐藏二级分类弹窗</li></ul> <p>落地代码：</p> <ul><li>创建分类组件 <code>src/views/category/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Top-Category<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'TopCategory'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>创建二级分类组件 <code>src/views/category/sub.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Sub-Category<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'SubCategory'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>1) 配置路由和组件实现跳转</strong></p> <ul><li>配置路由规则 <code>src/router/index.js</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import TopCategory from '@/views/category.vue'
</span><span class="token prefix inserted">+</span><span class="token line">import SubCategory from '@/views/category/sub.vue'
</span></span>
const routes = [
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> {
</span><span class="token prefix unchanged"> </span><span class="token line">   path: '/',
</span><span class="token prefix unchanged"> </span><span class="token line">   component: Layout,
</span><span class="token prefix unchanged"> </span><span class="token line">   children: [
</span><span class="token prefix unchanged"> </span><span class="token line">     { path: '/', component: Home },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      { path: '/category/:id', component: TopCategory },
</span><span class="token prefix inserted">+</span><span class="token line">      { path: '/category/sub/:id', component: SubCategory }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   ]
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>]
</code></pre></div><p><strong>2）跳转后关闭二级分类弹窗</strong></p> <ul><li>给每一个一级分类定义控制显示隐藏的数据，<code>open</code>  布尔类型，通过open设置类名控制显示隐藏。</li> <li>当进入一级分类的时候，将open改为true</li> <li>当离开一级分类的时候，将open改为false</li> <li>点击一级分类，二级分类，将open改为false</li></ul> <p>在vuex种给一级分类加open数据 <code>src/store/modules/category.js</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   async getCategory ({ commit }) {
</span><span class="token prefix unchanged"> </span><span class="token line">     const { result } = await findHeadCategory()
</span><span class="token prefix unchanged"> </span><span class="token line">     // 给一级分类加上一个控制二级分类显示隐藏的数据open
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      result.forEach(item =&gt; { item.open = false })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     // 获取数据成功，提交mutations进行数据修改
</span><span class="token prefix unchanged"> </span><span class="token line">     commit('setCategory', result)
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span></span></code></pre></div><p>添加了 show  hide  vuex的mutations函数修改 open  <code>src/store/modules/category.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 修改当前一级分类下的open数据为true</span>
    <span class="token function">show</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> category <span class="token operator">=</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">category</span> <span class="token operator">=&gt;</span> category<span class="token punctuation">.</span>id <span class="token operator">===</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      category<span class="token punctuation">.</span>open <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 修改当前一级分类下的open数据为false</span>
    <span class="token function">hide</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> category <span class="token operator">=</span> state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">category</span> <span class="token operator">=&gt;</span> category<span class="token punctuation">.</span>id <span class="token operator">===</span> item<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      category<span class="token punctuation">.</span>open <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>再 头部导航组件  实现显示和隐藏  <code>src/components/app-header-nav.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code>import { useStore } from 'vuex'
import { computed } from 'vue'
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'AppHeaderNav',
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span><span class="token prefix unchanged"> </span><span class="token line">   const store = useStore()
</span><span class="token prefix unchanged"> </span><span class="token line">   const list = computed(()=&gt;{
</span><span class="token prefix unchanged"> </span><span class="token line">     return store.state.category.list
</span><span class="token prefix unchanged"> </span><span class="token line">   })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const show = (item) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      store.commit('category/show', item)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    const hide = (item) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      store.commit('category/hide', item)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    return { list, show, hide}
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot; @mouseenter=&quot;show(item)&quot; @mouseleave=&quot;hide(item)&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;RouterLink :to=&quot;`/category/${item.id}`&quot; @click=&quot;hide(item)&quot;&gt;{{item.name}}&lt;/RouterLink&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;layer&quot; 
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">         :class=&quot;{open:item.open}&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;ul&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;li v-for=&quot;sub in item.children&quot; :key=&quot;sub.id&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">            &lt;RouterLink :to=&quot;`/category/sub/${sub.id}`&quot; @click=&quot;hide(item)&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">             &lt;img :src=&quot;sub.picture&quot; alt=&quot;&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p&gt;{{sub.name}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/ul&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/li&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-sign deleted"><span class="token prefix deleted">-</span><span class="token line">      // &gt; .layer {
</span><span class="token prefix deleted">-</span><span class="token line">      //   height: 132px;
</span><span class="token prefix deleted">-</span><span class="token line">      //   opacity: 1;
</span><span class="token prefix deleted">-</span><span class="token line">      // }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
.layer {
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &amp;.open {
</span><span class="token prefix inserted">+</span><span class="token line">    height: 132px;
</span><span class="token prefix inserted">+</span><span class="token line">    opacity: 1;
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span></code></pre></div><p><strong>总结：</strong> 再组件中调用vuex的mutation函数控制每个一级分类下二级分类的显示隐藏。</p> <h2 id="_10-首页-吸顶头部组件-传统实现"><a href="#_10-首页-吸顶头部组件-传统实现" class="header-anchor">#</a> 10-首页-吸顶头部组件-传统实现</h2> <blockquote><p><strong>目的：</strong>  完成吸顶头部</p></blockquote> <p>大致步骤：</p> <ul><li>准备吸顶组件基础布局</li> <li>页面滚动到78px以上，显示吸顶组件。</li></ul> <p>落地代码：</p> <ul><li>新建 <code>src/components/app-header-sticky.vue</code> 组件完成布局</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-sticky<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppHeaderNav</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>品牌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>专题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> AppHeaderNav <span class="token keyword">from</span> <span class="token string">'./app-header-nav.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppHeaderSticky'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> AppHeaderNav <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.app-header-sticky</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #e4e4e4<span class="token punctuation">;</span>
  <span class="token selector">.container</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.logo</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>~@/assets/images/logo.png<span class="token punctuation">)</span></span> no-repeat  right 2px<span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> 160px auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.right</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 220px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">border-left</span><span class="token punctuation">:</span> 2px solid <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>在 <code>Layout.vue</code> 中引入 <code>src\views\Layout.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;!-- 1. 顶部通栏布局 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;AppTopnav /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;!-- 2.1 普通头部布局--&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;AppHeader /&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;!-- 2.2 固定头部布局--&gt;
</span><span class="token prefix inserted">+</span><span class="token line">  &lt;AppHeaderSticky /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;main class=&quot;app-body&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 二级路由 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;RouterView&gt;&lt;/RouterView&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/main&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;!-- 3. 底部布局 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;AppFooter /&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import AppTopnav from '@/components/app-topnav.vue'
import AppHeader from '@/components/app-header.vue'
import AppFooter from '@/components/app-footer.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import AppHeaderSticky from '@/components/app-header-sticky.vue'
</span></span>export default {
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { AppTopnav, AppHeader, AppFooter, AppHeaderSticky },
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'xtx-layout'
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><ul><li>在滚动到 78px 完成显示效果，需要滑出动画。</li></ul> <p>第一步：默认移出顶部且完全透明，定义一个类回到默认吸顶位置完全显示。</p> <div class="language-diff extra-class"><pre class="language-diff"><code>.app-header-sticky {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> width: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> height: 80px;
</span><span class="token prefix unchanged"> </span><span class="token line"> position: fixed;
</span><span class="token prefix unchanged"> </span><span class="token line"> left: 0;
</span><span class="token prefix unchanged"> </span><span class="token line"> top: 0;
</span><span class="token prefix unchanged"> </span><span class="token line"> z-index: 999;
</span><span class="token prefix unchanged"> </span><span class="token line"> background-color: #fff;
</span><span class="token prefix unchanged"> </span><span class="token line"> border-bottom: 1px solid #e4e4e4;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  transform: translateY(-100%);
</span><span class="token prefix inserted">+</span><span class="token line">  opacity: 0;
</span><span class="token prefix inserted">+</span><span class="token line">  &amp;.show {
</span><span class="token prefix inserted">+</span><span class="token line">    transition: all 0.3s linear;
</span><span class="token prefix inserted">+</span><span class="token line">    transform: translateY(0);
</span><span class="token prefix inserted">+</span><span class="token line">    opacity: 1;
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span></code></pre></div><p>第二步：组件渲染后，监听滚动距离超过78px隐藏</p> <div class="language-diff extra-class"><pre class="language-diff"><code>import AppHeaderNav from './app-header-nav.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { ref } from 'vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'AppHeaderSticky',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: { AppHeaderNav },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  setup () {
</span><span class="token prefix inserted">+</span><span class="token line">    const isShow = ref(false)
</span><span class="token prefix inserted">+</span><span class="token line">    // 浏览器绑定滚动事件
</span><span class="token prefix inserted">+</span><span class="token line">    window.onscroll = () =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      // 获取文档滚动出去了多少
</span><span class="token prefix inserted">+</span><span class="token line">      const scrollTop = document.documentElement.scrollTop
</span><span class="token prefix inserted">+</span><span class="token line">      // 页面滚动到78px以上，显示吸顶组件，否则隐藏
</span><span class="token prefix inserted">+</span><span class="token line">      if (scrollTop &gt;= 78) {
</span><span class="token prefix inserted">+</span><span class="token line">        isShow.value = true
</span><span class="token prefix inserted">+</span><span class="token line">      } else {
</span><span class="token prefix inserted">+</span><span class="token line">        isShow.value = false
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    return { isShow }
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;div class=&quot;app-header-sticky&quot; :class=&quot;{show: isShow}&quot;&gt;
</span></span></code></pre></div><p>第三步：v-show使用，为了吸顶头部展开的内容不遮住头部导航。</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;div class=&quot;container&quot; v-show=&quot;isShow&quot;&gt;
</span></span></code></pre></div><h2 id="_11-首页-吸顶头部组件-组合api"><a href="#_11-首页-吸顶头部组件-组合api" class="header-anchor">#</a> 11-首页-吸顶头部组件-组合API</h2> <blockquote><p><strong>目的：</strong> 体验基于组合API的@vueuse/core工具库</p></blockquote> <p>官方网站：</p> <p><a href="https://vueuse.org/functions.html" target="_blank" rel="noopener noreferrer">https://vueuse.org/functions.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>安装：<code>@vueuse/core</code> 包，它封装了常见的一些交互逻辑。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i @vueuse/core
或
<span class="token function">yarn</span> <span class="token function">add</span> @vueuse/core
</code></pre></div><p>使用：<code>src/components/app-header-sticky.vue</code> 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app-header-sticky<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{show:y&gt;=78}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>y&gt;=78<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AppHeaderNav</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>品牌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>专题<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> AppHeaderNav <span class="token keyword">from</span> <span class="token string">'./app-header-nav'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useWindowScroll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'AppHeaderSticky'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> AppHeaderNav <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解构出的 y 是响应式数据</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useWindowScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 直接返回给模板使用</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> y <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>总结：</strong></p> <ul><li><p>useWindowScroll() 是@vueuse/core提供的api可返回当前页面滚动时候蜷曲的距离。x横向，y纵向</p></li> <li><p>vue3.0组合API提供了更多逻辑代码封装的能力。@vueuse/core 基于组合API封装好用的工具函数。</p></li></ul> <h2 id="_12-首页主体-左侧分类-结构渲染"><a href="#_12-首页主体-左侧分类-结构渲染" class="header-anchor">#</a> 12-首页主体-左侧分类-结构渲染</h2> <blockquote><p><strong>目的：</strong> 实现首页主体内容-左侧分类</p></blockquote> <p>大致步骤：</p> <ul><li>准备左侧分类组件和基础布局</li> <li>从vuex中拿出9个分类数据，且值需要两个子分类，但是左侧是10个，需要补充一个品牌数据。
<ul><li>使用计算属性完成上面逻辑</li></ul></li> <li>渲染组件</li></ul> <p>落地代码：</p> <ul><li>准备组件：<code>src/views/home/components/home-category.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>home-category<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>居家<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>洗漱<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清洁<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>  
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeCategory'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-category</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 99<span class="token punctuation">;</span>
  <span class="token selector">.menu</span> <span class="token punctuation">{</span>
    <span class="token selector">li</span> <span class="token punctuation">{</span>
      <span class="token property">padding-left</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
      <span class="token punctuation">}</span>
      <span class="token selector">a</span> <span class="token punctuation">{</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token selector">&amp;:first-child</span> <span class="token punctuation">{</span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>预览组件：<code>src/views/home/index.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>page-home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-entry<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 左侧分类 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomeCategory</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomeCategory <span class="token keyword">from</span> <span class="token string">'./components/home-category.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'PageHome'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomeCategory <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>从vuex中拿出分类，取出子分类中的前两项。给一级分类追加一项品牌，进行渲染。</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>home-category<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in menuList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/category/${item.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.children<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span>
            <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub in item.children<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub.id<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`/category/sub/${sub.id}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            {{sub.name}}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>   
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeCategory'</span><span class="token punctuation">,</span>
  <span class="token comment">// 1. 获取vuex的一级分类，并且只需要两个二级分类</span>
  <span class="token comment">// 2. 需要在组件内部，定义一个品牌数据</span>
  <span class="token comment">// 3. 根据vuex的分类数据和组件中定义品牌数据，得到左侧分类完整数据(9分类+1品牌)数组</span>
  <span class="token comment">// 4. 进行渲染即可</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    
    <span class="token keyword">const</span> brand <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'brand'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'品牌'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'brand-chilren'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'品牌推荐'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> menuList <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> arr <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>category<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
          <span class="token comment">// 防止初始化没有children的时候调用slice函数报错</span>
          <span class="token literal-property property">children</span><span class="token operator">:</span> item<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> item<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span>
      <span class="token keyword">return</span> arr
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> menuList <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_13-首页主体-左侧分类-弹层展示"><a href="#_13-首页主体-左侧分类-弹层展示" class="header-anchor">#</a> 13-首页主体-左侧分类-弹层展示</h2> <blockquote><p><strong>目的：</strong> 实现首页主体内容-左侧分类-鼠标进入弹出</p></blockquote> <p>大致步骤：</p> <ul><li>准备布局</li> <li>得到数据
<ul><li>鼠标经过记录ID</li> <li>通过ID得到分类推荐商品，使用计算属性</li> <li>完成渲染</li></ul></li></ul> <p>落地代码：</p> <ol><li>准备布局：<code>src/views/home/components/home-category.vue</code></li></ol> <div class="language-html extra-class"><pre class="language-html"><code>    <span class="token comment">&lt;!-- 弹层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>分类推荐 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>根据您的购买或浏览记录推荐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 9<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://yanxuan-item.nosdn.127.net/5a115da8f2f6489d8c71925de69fe7b8.png<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>【定金购】严选零食大礼包（12件）<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>超值组合装，满足馋嘴欲<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>100.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.home-category</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...省略其他代码</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token selector">.layer</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
 <span class="token selector">.layer</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 990px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>255<span class="token punctuation">,</span>0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
    <span class="token selector">h4</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
      <span class="token selector">small</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">ul</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
      <span class="token selector">li</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 310px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #eee<span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token selector">&amp;:nth-child(3n)</span> <span class="token punctuation">{</span>
          <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">a</span> <span class="token punctuation">{</span>
          <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
          <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
          <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
          <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #e3f9f4<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">img</span> <span class="token punctuation">{</span>
              <span class="token property">width</span><span class="token punctuation">:</span> 95px<span class="token punctuation">;</span>
              <span class="token property">height</span><span class="token punctuation">:</span> 95px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.info</span> <span class="token punctuation">{</span>
            <span class="token property">padding-left</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
		    <span class="token property">width</span><span class="token punctuation">:</span> 190px<span class="token punctuation">;</span>
            <span class="token selector">.name</span> <span class="token punctuation">{</span>
              <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
              <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">.desc</span> <span class="token punctuation">{</span>
              <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">.price</span> <span class="token punctuation">{</span>
              <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
              <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@priceColor</span><span class="token punctuation">;</span>
              <span class="token selector">i</span> <span class="token punctuation">{</span>
                <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
  <span class="token comment">// ...省略其他代码</span>
</code></pre></div><ol start="2"><li>渲染逻辑：<code>src/views/home/components/home-category.vue</code></li></ol> <ul><li>定义一个数据记录当前鼠标经过分类的ID，使用计算属性得到当前的分类推荐商品数据</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;ul class=&quot;menu&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;li v-for=&quot;item in menuList&quot; :key=&quot;item.id&quot; @mouseenter=&quot;categoryId=item.id&quot;&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code>import { useStore } from 'vuex'
import { reactive, computed, ref } from 'vue'
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeCategory',
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span><span class="token prefix unchanged"> </span><span class="token line"> 	// 组织所有数据逻辑
</span><span class="token prefix unchanged"> </span><span class="token line"> 	// 1. 获取vuex的一级分类，并且只需要两个二级分类
</span><span class="token prefix unchanged"> </span><span class="token line"> 	// 2. 需要在组件内部，定义一个品牌数据
</span><span class="token prefix unchanged"> </span><span class="token line"> 	// 3. 根据vuex的分类数据和组件中定义品牌数据，得到左侧分类完整数据(9分类+1品牌)数组
</span><span class="token prefix unchanged"> </span><span class="token line"> 	// 4. 进行渲染即可
</span><span class="token prefix unchanged"> </span><span class="token line">   const brand = reactive({
</span><span class="token prefix unchanged"> </span><span class="token line">     id: 'brand',
</span><span class="token prefix unchanged"> </span><span class="token line">     name: '品牌',
</span><span class="token prefix unchanged"> </span><span class="token line">     children: [{ id: 'brand-chilren', name: '品牌推荐' }]
</span><span class="token prefix unchanged"> </span><span class="token line">   })
</span><span class="token prefix unchanged"> </span><span class="token line">   const store = useStore()
</span><span class="token prefix unchanged"> </span><span class="token line">   const menuList = computed(() {
</span><span class="token prefix unchanged"> </span><span class="token line">     const list = store.state.category.list.map(item =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">       return {
</span><span class="token prefix unchanged"> </span><span class="token line">         id: item.id,
</span><span class="token prefix unchanged"> </span><span class="token line">         name: item.name,
</span><span class="token prefix unchanged"> </span><span class="token line">         // 防止初始化没有children的时候调用slice函数报错
</span><span class="token prefix unchanged"> </span><span class="token line">         children: item.children &amp;&amp; item.children.slice(0, 2)
</span><span class="token prefix unchanged"> </span><span class="token line">       }
</span><span class="token prefix unchanged"> </span><span class="token line">     })
</span><span class="token prefix unchanged"> </span><span class="token line">     list.push(brand)
</span><span class="token prefix unchanged"> </span><span class="token line">     return list
</span><span class="token prefix unchanged"> </span><span class="token line">   })
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // 获取当前分类逻辑
</span><span class="token prefix inserted">+</span><span class="token line">    const categoryId = ref(null)
</span><span class="token prefix inserted">+</span><span class="token line">    const currCategory = computed(()=&gt;{
</span><span class="token prefix inserted">+</span><span class="token line">      return menuList.value.find(item =&gt; item.id === categoryId.value)
</span><span class="token prefix inserted">+</span><span class="token line">    })
</span><span class="token prefix inserted">+</span><span class="token line">    return { menuList, categoryId, currCategory }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><ul><li>渲染模版</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token comment">&lt;!-- 弹层 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>layer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>分类推荐 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>根据您的购买或浏览记录推荐<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currCategory &amp;&amp; currCategory.goods &amp;&amp; currCategory.goods.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in currCategory.goods<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.desc}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>¥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>{{item.price}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_14-首页主体-左侧分类-处理品牌"><a href="#_14-首页主体-左侧分类-处理品牌" class="header-anchor">#</a> 14-首页主体-左侧分类-处理品牌</h2> <blockquote><p><strong>目的：</strong>  品牌展示特殊，需要额外获取数据和额外的布局。</p></blockquote> <p>大致步骤：</p> <ul><li>定义API接口，在 <code>home-category.vue</code> 组件获取数据。</li> <li>完成基础布局，根据数据进行渲染。</li> <li>处理左侧分类激活显示。</li></ul> <p>落地代码：</p> <ol><li>定义API接口，在 <code>home-category.vue</code> 组件获取数据。</li></ol> <p><code>src/api/home.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findBrand</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/brand'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>limit<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/views/home/components/home-category.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   const brand = reactive({
</span><span class="token prefix unchanged"> </span><span class="token line">     id: 'brand',
</span><span class="token prefix unchanged"> </span><span class="token line">     name: '品牌',
</span><span class="token prefix unchanged"> </span><span class="token line">     children: [{ id: 'brand-children', name: '品牌推荐' }],
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     brands: []
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   })
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { findBrand } from '@/api/home.js'
</span></span>// ... 省略代码
setup () {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // ... 省略代码
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    findBrand().then(data=&gt;{
</span><span class="token prefix inserted">+</span><span class="token line">        brand.brands = data.result
</span><span class="token prefix inserted">+</span><span class="token line">    })
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   return { menuList, categoryId, currCategory }
</span></span>}
</code></pre></div><ol start="2"><li>进行渲染：<code>src/views/home/components/home-category.vue</code></li></ol> <ul><li>布局样式</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>brand<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/brand_goods_1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>place<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-dingwei<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>北京<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>DW<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc ellipsis-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>DW品牌闪购<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code>      <span class="token selector">li.brand</span> <span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 180px<span class="token punctuation">;</span>
        <span class="token selector">a</span> <span class="token punctuation">{</span>
          <span class="token property">align-items</span><span class="token punctuation">:</span> flex<span class="token operator">-</span>start<span class="token punctuation">;</span>
          <span class="token selector">img</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.info</span> <span class="token punctuation">{</span>
            <span class="token selector">p</span> <span class="token punctuation">{</span>
              <span class="token property">margin-top</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token selector">.place</span> <span class="token punctuation">{</span>
              <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
</code></pre></div><ul><li>进行渲染</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 弹层 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;layer&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;h4 v-if=&quot;currCategory&quot;&gt;{{currCategory.id==='brand'?'品牌':'分类'}}推荐 &lt;small&gt;根据您的购买或浏览记录推荐&lt;/small&gt;&lt;/h4&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;ul v-if=&quot;currCategory &amp;&amp; currCategory.goods &amp;&amp; currCategory.goods.length&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;li v-for=&quot;item in currCategory.goods&quot; :key=&quot;item.id&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;RouterLink to=&quot;/&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;div class=&quot;info&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;name ellipsis-2&quot;&gt;{{item.name}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;desc ellipsis&quot;&gt;{{item.desc}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;price&quot;&gt;&lt;i&gt;¥&lt;/i&gt;{{item.price}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/ul&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;ul v-if=&quot;currCategory &amp;&amp; currCategory.brands &amp;&amp; currCategory.brands.length&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;li class=&quot;brand&quot; v-for=&quot;item in currCategory.brands&quot; :key=&quot;item.id&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;RouterLink to=&quot;/&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">            &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">            &lt;div class=&quot;info&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">              &lt;p class=&quot;place&quot;&gt;&lt;i class=&quot;iconfont icon-dingwei&quot;&gt;&lt;/i&gt;{{item.place}}&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">              &lt;p class=&quot;name ellipsis&quot;&gt;{{item.name}}&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">              &lt;p class=&quot;desc ellipsis-2&quot;&gt;{{item.desc}}&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">            &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;/RouterLink&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;/li&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/ul&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span></span></code></pre></div><ol start="3"><li>处理左侧分类激活显示 <code>src/views/home/components/home-category.vue</code></li></ol> <ul><li>激活类active</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> .menu {
</span><span class="token prefix unchanged"> </span><span class="token line">   li {
</span><span class="token prefix unchanged"> </span><span class="token line">     padding-left: 40px;
</span><span class="token prefix unchanged"> </span><span class="token line">     height: 50px;
</span><span class="token prefix unchanged"> </span><span class="token line">     line-height: 50px;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &amp;:hover, &amp;.active {
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       background: @xtxColor;
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span></span></code></pre></div><ul><li>绑定类</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">  &lt;ul class=&quot;menu&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;li :class=&quot;{active:categoryId === item.id}&quot;
</span></span></code></pre></div><ul><li>移除类</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;div class='home-category' @mouseleave=&quot;categoryId = null&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;ul class=&quot;menu&quot;&gt;
</span></span></code></pre></div><p><strong>总结：</strong>  品牌数据需要请求后台，再汇总到所有数据中，然后渲染，然后激活当前的分类。</p> <h2 id="_15-首页主体-左侧分类-骨架效果"><a href="#_15-首页主体-左侧分类-骨架效果" class="header-anchor">#</a> 15-首页主体-左侧分类-骨架效果</h2> <blockquote><p><strong>目的：</strong>  为了在加载的过程中等待效果更好，封装一个骨架屏组件。</p></blockquote> <p>大致步骤：</p> <ul><li>需要一个组件，做占位使用。这个占位组件有个专业术语：骨架屏组件。
<ul><li>暴露一些属性：高，宽，背景，是否有闪动画。</li></ul></li> <li>这是一个公用组件，需要全局注册，将来这样的组件建议再vue插件中定义。</li> <li>使用组件完成左侧分类骨架效果。</li></ul> <p>落的代码：</p> <ol><li>封装组件：<code>src/components/library/xtx-skeleton.vue</code></li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-skeleton<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{width,height}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{shan:animated}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 1 盒子--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>block<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{backgroundColor:bg}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 2 闪效果 xtx-skeleton 伪元素 ---&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxSkeleton'</span><span class="token punctuation">,</span>
  <span class="token comment">// 使用的时候需要动态设置 高度，宽度，背景颜色，是否闪下</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#eee'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'100px'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'30px'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">animated</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.xtx-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
  <span class="token selector">.block</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.shan</span> <span class="token punctuation">{</span>
  <span class="token selector">&amp;::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">animation</span><span class="token punctuation">:</span> shan 1.5s ease 0s infinite<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
      to left<span class="token punctuation">,</span>
      <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> 0<span class="token punctuation">,</span>
      <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span> 50%<span class="token punctuation">,</span>
      <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0<span class="token punctuation">)</span> 100%
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">skewX</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@keyframes</span> shan</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">left</span><span class="token punctuation">:</span> -100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 120%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="2"><li>封装插件：插件定义 <code>src/components/library/index.js</code></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 扩展vue原有的功能：全局组件，自定义指令，挂载原型方法，注意点：Vue3没有全局过滤器。</span>
<span class="token keyword">import</span> XtxSkeleton <span class="token keyword">from</span> <span class="token string">'./xtx-skeleton'</span>

<span class="token comment">// Vue2 全局注册组件</span>
<span class="token comment">// Vue.component('组件名', 组件)</span>

<span class="token comment">// Vue3 全局注册组件</span>
<span class="token comment">// app.component('组件名', 组件)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// install 这种写法以后是提供给 app.use() 安装组件库用的</span>
  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Vue3 全局注册组件</span>
    app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>XtxSkeleton<span class="token punctuation">.</span>name<span class="token punctuation">,</span> XtxSkeleton<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><ol start="3"><li>使用插件：   <code>src/main.js</code></li></ol> <div class="language-diff extra-class"><pre class="language-diff"><code>import { createApp } from 'vue'
import App from './App.vue'
import router from './router'
import store from './store'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">// 导入自己封装的组件库
</span><span class="token prefix inserted">+</span><span class="token line">import XtxUI from '@/components/library'
</span></span>
import 'normalize.css'
import '@/assets/styles/common.less'
// 创建Vue应用
const app = createApp(App)
// 使用Vuex
app.use(store)
// 使用路由
app.use(router)
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">// 安装自己封装的组件库
</span><span class="token prefix inserted">+</span><span class="token line"> app.use(XtxUI)
</span></span>// 挂载到#app中
app.mount('#app')
</code></pre></div><ol start="3"><li>最后使用组件完成左侧分类骨架效果： <code>src/views/home/components/home-category.vue</code></li></ol> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;ul class=&quot;menu&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;li :class=&quot;{active:categoryId===item.id}&quot; v-for=&quot;item in menuList&quot; :key=&quot;item.id&quot; @mouseenter=&quot;categoryId=item.id&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;RouterLink to=&quot;/&quot;&gt;{{item.name}}&lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;RouterLink to=&quot;/&quot; v-for=&quot;sub in item.children&quot; :key=&quot;sub.id&quot;&gt;{{sub.name}}&lt;/RouterLink&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;template v-if=&quot;!item.children&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;XtxSkeleton width=&quot;60px&quot; height=&quot;18px&quot; style=&quot;margin-right:5px&quot; bg=&quot;rgba(255,255,255,0.2)&quot; /&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;XtxSkeleton width=&quot;50px&quot; height=&quot;18px&quot; bg=&quot;rgba(255,255,255,0.2)&quot; /&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;/template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/ul&gt;
</span></span></code></pre></div><h2 id="_16-首页主体-轮播图-基础布局"><a href="#_16-首页主体-轮播图-基础布局" class="header-anchor">#</a> 16-首页主体-轮播图-基础布局</h2> <blockquote><p><strong>目的：</strong>  封装小兔鲜轮播图组件，第一步：基础结构的使用。</p></blockquote> <p><strong>大致步骤：</strong></p> <ul><li>准备xtx-carousel组件基础布局，全局注册</li> <li>准备home-banner组件，使用 xtx-carousel 组件，在首页注册使用。</li> <li>深度作用xtx-carousel组件的默认样式</li></ul> <p><strong>落的代码：</strong></p> <ul><li>轮播图基础结构 <code>src/components/library/xtx-carousel.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-carousel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>carousel-body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>carousel-item fade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://yjy-xiaotuxian-dev.oss-cn-beijing.aliyuncs.com/picture/2021-04-15/1ba86bcc-ae71-42a3-bc3e-37b662f7f07e.jpg<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>carousel-btn prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>carousel-btn next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>carousel-indicator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxCarousel'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.xtx-carousel</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token selector">.carousel</span> <span class="token punctuation">{</span>
    <span class="token selector">&amp;-body</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;-item</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s linear<span class="token punctuation">;</span>
      <span class="token selector">&amp;.fade</span> <span class="token punctuation">{</span>
        <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
        <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;-indicator</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token selector">span</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
        <span class="token selector">~ span</span> <span class="token punctuation">{</span>
          <span class="token property">margin-left</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">&amp;.active</span> <span class="token punctuation">{</span>
          <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;-btn</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
      <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 228px<span class="token punctuation">;</span>
      <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">transition</span><span class="token punctuation">:</span> all 0.5s<span class="token punctuation">;</span>
      <span class="token selector">&amp;.prev</span> <span class="token punctuation">{</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;.next</span> <span class="token punctuation">{</span>
        <span class="token property">right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token selector">.carousel-btn</span> <span class="token punctuation">{</span>
      <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>全局注册轮播图 <code>src/components/library/index.js</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code>import XtxSkeleton from './xtx-skeleton.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import XtxCarousel from './xtx-carousel.vue'
</span></span>
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> install (app) {
</span><span class="token prefix unchanged"> </span><span class="token line">   app.component(XtxSkeleton.name, XtxSkeleton)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    app.component(XtxCarousel.name, XtxCarousel)
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><ul><li>首页广告组件基础结构 <code>src/views/home/components/home-banner.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-banner<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxCarousel</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeBanner'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-banner</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1240px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 98
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>首页使用广告组件</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;!-- 首页入口 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;home-entry&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;!-- 左侧分类 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;HomeCategory /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;!-- 轮播图 --&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">     &lt;HomeBanner /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import HomeCategory from './components/home-category.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import HomeBanner from './components/home-banner.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomePage',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: {
</span><span class="token prefix unchanged"> </span><span class="token line">   HomeCategory,
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   HomeBanner
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">style scoped lang=&quot;less&quot;&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">/style&gt;
</span></span></code></pre></div><ul><li>覆盖轮播图组件样式   <code>src/views/home/components/home-banner.vue</code></li></ul> <div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.xtx-carousel</span> <span class="token punctuation">{</span>
  <span class="token selector">:deep(.carousel-btn.prev)</span> <span class="token punctuation">{</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 270px <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">:deep(.carousel-indicator)</span> <span class="token punctuation">{</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong>  需要注意要覆盖样式，首页轮播图特殊些。</p> <p><code>/deep/</code> <code>::v-deep</code> <code>:deep()</code>  功能都是一样的，<code>Vue3</code> 推荐用 <code>:deep()</code>，其他写法编译有警告。</p> <h2 id="_17-首页主体-轮播图-渲染结构"><a href="#_17-首页主体-轮播图-渲染结构" class="header-anchor">#</a> 17-首页主体-轮播图-渲染结构</h2> <blockquote><p><strong>目的：</strong>  封装小兔鲜轮播图组件，第二步：动态渲染结构。</p></blockquote> <p><strong>大致步骤：</strong></p> <ul><li>定义获取广告图API函数</li> <li>在home-banner组件获取轮播图数据，传递给xtx-carousel组件</li> <li>在xtx-carousel组件完成渲染</li></ul> <p><strong>落的代码：</strong></p> <ul><li>API函数 <code>src/api/home.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 首页-广告区域(pc-小程序)
 * @param {*} distributionSite 广告区域展示位置（投放位置 投放位置，1为首页，2为分类商品页） 默认是1
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findBanner</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">distributionSite <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/banner'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">distributionSite</span><span class="token operator">:</span> distributionSite <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>广告组件获取数据，传给轮播图 <code>src/views/home/components/home-banner.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;home-banner&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;XtxCarousel :sliders=&quot;list&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { ref } from 'vue'
</span><span class="token prefix inserted">+</span><span class="token line">import { findBanner } from '@/api/home'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeBanner',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  setup () {
</span><span class="token prefix inserted">+</span><span class="token line">    const list = ref([])
</span><span class="token prefix inserted">+</span><span class="token line">    findBanner().then(data =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      list.value = data.result
</span><span class="token prefix inserted">+</span><span class="token line">    })
</span><span class="token prefix inserted">+</span><span class="token line">    return { list }
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><ul><li>完成轮播图结构渲染 <code>src/components/library/xtx-carousel.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class='xtx-carousel'&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;ul class=&quot;carousel-body&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;li class=&quot;carousel-item&quot; v-for=&quot;(item,index) in sliders&quot; :key=&quot;index&quot; :class=&quot;{fade:activeIndex===index}&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;RouterLink :to=&quot;item.hrefUrl&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;img :src=&quot;item.imgUrl&quot; alt=&quot;&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/ul&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;a href=&quot;javascript:;&quot; class=&quot;carousel-btn prev&quot;&gt;&lt;i class=&quot;iconfont icon-angle-left&quot;&gt;&lt;/i&gt;&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;a href=&quot;javascript:;&quot; class=&quot;carousel-btn next&quot;&gt;&lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;carousel-indicator&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;span v-for=&quot;(item,index) in sliders&quot; :key=&quot;index&quot; :class=&quot;{active:activeIndex===index}&quot;&gt;&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { ref } from 'vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'XtxCarousel',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  props: {
</span><span class="token prefix inserted">+</span><span class="token line">    sliders: {
</span><span class="token prefix inserted">+</span><span class="token line">      type: Array,
</span><span class="token prefix inserted">+</span><span class="token line">      default: () =&gt; []
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">  },
</span><span class="token prefix inserted">+</span><span class="token line">  setup () {
</span><span class="token prefix inserted">+</span><span class="token line">    // 默认显示的图片的索引
</span><span class="token prefix inserted">+</span><span class="token line">    const activeIndex = ref(0)
</span><span class="token prefix inserted">+</span><span class="token line">    return { activeIndex }
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><p><strong>总结：</strong>  fade是控制显示那张图片的，需要一个默认索引数据，渲染第一张图和激活第一个点。</p> <h2 id="_18-首页主体-轮播图-逻辑封装"><a href="#_18-首页主体-轮播图-逻辑封装" class="header-anchor">#</a> 18-首页主体-轮播图-逻辑封装</h2> <blockquote><p><strong>目的：</strong>  封装小兔鲜轮播图组件，第三步：逻辑功能实现。</p></blockquote> <p><strong>大致步骤：</strong></p> <ul><li>指示器切换，上一张，下一张</li> <li>自动播放，暴露自动轮播属性，设置了就自动轮播</li> <li>如果有自动播放，鼠标进入离开，暂停，开启</li> <li>销毁组件，清理定时器</li></ul> <p><strong>落地代码：</strong> <code>src/components/library/xtx-carousel.vue</code></p> <ul><li>指示器切换</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;span
</span><span class="token prefix unchanged"> </span><span class="token line">       v-for=&quot;(item, index) in sliders&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       :key=&quot;i&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">       :class=&quot;{ active: activeIndex === index }&quot;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        @click=&quot;activeIndex = index&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &gt;&lt;/span&gt;
</span></span></code></pre></div><ul><li>上一张，下一张</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 上一张下一张</span>
    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> temp <span class="token operator">=</span> activeIndex<span class="token punctuation">.</span>value <span class="token operator">+</span> step
      <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        activeIndex<span class="token punctuation">.</span>value <span class="token operator">=</span> props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">&gt;</span> props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        activeIndex<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span>
        activeIndex<span class="token punctuation">.</span>value <span class="token operator">=</span> temp
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> activeIndex<span class="token punctuation">,</span> toggle <span class="token punctuation">}</span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 上一张 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;a
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      @click=&quot;toggle(-1)&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     href=&quot;javascript:;&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     class=&quot;carousel-btn prev&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;i class=&quot;iconfont icon-angle-left&quot;&gt;&lt;/i&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 下一张 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;a
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      @click=&quot;toggle(1)&quot;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     href=&quot;javascript:;&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">     class=&quot;carousel-btn next&quot;
</span><span class="token prefix unchanged"> </span><span class="token line">   &gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;i class=&quot;iconfont icon-angle-right&quot;&gt;&lt;/i&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/a&gt;
</span></span></code></pre></div><ul><li>自动轮播实现</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { ref, watch } from 'vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'XtxCarousel',
</span><span class="token prefix unchanged"> </span><span class="token line"> props: {
</span><span class="token prefix unchanged"> </span><span class="token line">   sliders: {
</span><span class="token prefix unchanged"> </span><span class="token line">     type: Array,
</span><span class="token prefix unchanged"> </span><span class="token line">     default: () =&gt; []
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    duration: {
</span><span class="token prefix inserted">+</span><span class="token line">      type: Number,
</span><span class="token prefix inserted">+</span><span class="token line">      default: 3000
</span><span class="token prefix inserted">+</span><span class="token line">    },
</span><span class="token prefix inserted">+</span><span class="token line">    autoPlay: {
</span><span class="token prefix inserted">+</span><span class="token line">      type: Boolean,
</span><span class="token prefix inserted">+</span><span class="token line">      default: false
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> },
</span><span class="token prefix unchanged"> </span><span class="token line"> setup (props) {
</span><span class="token prefix unchanged"> </span><span class="token line">   // 默认显示的图片的索引
</span><span class="token prefix unchanged"> </span><span class="token line">   const activeIndex = ref(0)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    // 自动播放
</span><span class="token prefix inserted">+</span><span class="token line">    let timer = null
</span><span class="token prefix inserted">+</span><span class="token line">    const autoPlayFn = () =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      clearInterval(timer)
</span><span class="token prefix inserted">+</span><span class="token line">      timer = setInterval(() =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">        activeIndex.value++
</span><span class="token prefix inserted">+</span><span class="token line">        if (activeIndex.value &gt; props.sliders.length - 1) {
</span><span class="token prefix inserted">+</span><span class="token line">          activeIndex.value = 0
</span><span class="token prefix inserted">+</span><span class="token line">        }
</span><span class="token prefix inserted">+</span><span class="token line">      }, props.duration)
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">    watch(() =&gt; props.sliders, (newVal) =&gt; {
</span><span class="token prefix inserted">+</span><span class="token line">      // 有数据&amp;开启自动播放，才调用自动播放函数
</span><span class="token prefix inserted">+</span><span class="token line">      if (newVal.length &gt; 1 &amp;&amp; props.autoPlay) {
</span><span class="token prefix inserted">+</span><span class="token line">        autoPlayFn()
</span><span class="token prefix inserted">+</span><span class="token line">      }
</span><span class="token prefix inserted">+</span><span class="token line">    }, { immediate: true })
</span></span>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><ul><li>如果有自动播放，鼠标进入离开，暂停，开启</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 鼠标进入停止，移出开启自动，前提条件：autoPlay为true</span>
    <span class="token keyword">const</span> <span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">autoPlayFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> activeIndex<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> start <span class="token punctuation">}</span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;div class='xtx-carousel' @mouseenter=&quot;stop()&quot; @mouseleave=&quot;start()&quot;&gt;
</span></span></code></pre></div><p>使用需要加 auto-play <code>&lt;XtxCarousel auto-play :sliders=&quot;sliders&quot; /&gt;</code></p> <ul><li>销毁组件，清理定时器</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token comment">// 组件消耗，清理定时器</span>
    <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>总结：</strong> 按照思路步骤，一步步实现即可。</p> <h2 id="_19-首页主体-面板封装"><a href="#_19-首页主体-面板封装" class="header-anchor">#</a> 19-首页主体-面板封装</h2> <blockquote><p><strong>目的：</strong>  提取首页的公用面板进行复用</p></blockquote> <p>大致思路：</p> <ul><li>头部
<ul><li>标题和副标题由props传入</li> <li>右侧内容由插槽传入
<ul><li>查看更多使用次数多封装成全局组件</li></ul></li></ul></li> <li>主体
<ul><li>全部由插槽传入</li></ul></li></ul> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA+0AAAEHCAYAAADbB6feAAAbVUlEQVR4nO3df4xW5YEv8O/gAFqVsZQGGHABB7e4rll0w7DYoSSr7SbgUm2bVepGQ7oa7T8VWkM2TS9rSLNrTMUmuxdTbQzNrdCb649lhWwq9cbCFh161U1rl015BQoD2IyWl0Llh/reP2YGh2EGZuCdeQ/M55OYmXnPeZ/n+x5MmC/nOeekUqlUDhw4UKmW7du3V2WcImaqVOQaKLn6r4iZKhW5Bkqu/itipkpFroGSq/+KmKlSkWugLvRcRcxUqcg1UHL1XxEzVSon5xoRAAAAoJCUdgAAACgopR0AAAAKSmkHAACAgqrbvn17pdYhAAAAgF4M5l3uzkURM1Uqcg2UXP1XxEyVilwDJVf/FTFTpSLXQMnVf0XMVKnINVAXeq4iZqpU5BooufqviJkqFXePBwAAgPOC0g4AAAAFpbQDAABAQSntAAAAUFBKOwAAABSU0g4AAAAFpbQDAABAQSntAAAAUFBKOwAAABSU0g4AAAAFpbQDAABAQSntAAAAUFD1QznZ66+/nn//93/PW2+9lZ///Oe56qqrsmXLlqGMAAAAACeZM2dO3nrrrTQ3N2fatGn5q7/6q1x//fW1jpVkCEv70qVLc+jQoVx33XVZunRpxo4dm/Hjxw/V9AAAANCnt99+O++++25efPHFrFq1KpdddlkeffTRWsca/NK+efPm/N3f/V3+4R/+IXfcccdgTwcAAAADNn78+IwfPz7XXHNNkmTt2rWZMWNGnnzyybS0tNQs16CW9k2bNuU73/lOWltbM2bMmMGcCgAAAKrmjjvuyPz583PXXXelUqlk7ty5NckxaKV98+bN+c53vpPnn39+sKYAAACAQTNmzJg8//zzufXWW1NXV1eTM+51Bw4cqAzGwLNnz3aGHQAAgPPewYMH09zcnFdffXXI566rVCqVcrmchoaGqgxYKpXyL//yL2lubnYNOwAAABeEtWvXprW1tc+b01W7Vzc1NSUZhOe0/+pXv8qhQ4cUdgAAAC4Yd9xxRw4dOpTXX399SOetemnfvHlzrrvuumoPCwAAADV17bXX5sc//vGQzln10t7W1pabb7652sMCAABATX32s5/Njh07hnTOqt89/he/+EXGjh1b7WEZBF/84hezZcuWWscAAACSzJkzJ88880ytY3AaY8eOTWtr65DOWfXSPnXq1IwfP77awzIItmzZkr1799Y6BgAAkKSxsbHWETiDCRMmZNq0aUM6Z9WXx2/durXaQwIAAEAhDPVq5aqXdgAAAKA6lHYAAAAoKKUdAAAACkppBwAAgIJS2gEAAKCglHYAAAAoKKUdAAAACkppBwAAgIJS2gEAAKCg6msdAACgyLZubc3Bg7+vdQzgLF166SU5dux4Ro6sz6hRo/Kxj12aK674eD75yU+mvl4dovj8XwoAcBoHD/4+Yxs+rHUM4KwdzsgRyYeVY/ng+Hsp/66c373722zbti2XXXZpxo+fkMbGRgWewqovlUpJkvb29hpHAQAAqL4RI7quC650vnI8l4xOjr9fzp7dh/KbXTszfsLEXH311bULyXmlq0f3VM1e3TVHfVNTU8rlchoaGqo2OAAAQNGNrE9G1n+Q5IO80747u3f/Jk1NTZkyZWqto1FwTU1Np7xWzV5dKpVOzOFGdAAAwLA3euQH+fiYD7O3bUdeffWVWseBE5R2AACAThePej8X5VBeeumlHDp0qNZxQGkHAADo7qKLKvn4mA/y+uv/L+VyudZxGOaUdgAAgF5cdsmx/PIXr+edd96pdRSGMaUdAACgDx+7+HjefPMXOXz4cK2jMEwp7QAAAKdx+ceO55VXXkmlUjnzzlBlSjsAAMAZXHH5h3nttZ/XOgbDkNIOAABwBiNGJMeOHMpvfrOr1lEYZpR2AACAfrh49Pv59a+31zoGw4zSDgAA0E+XXpJs+6//qnUMhpH6WgfgwnDgvQMpH/EMSwZXw8UNueKSK2odAwAYxkaP+jDlg+/myJEjufjii2sdh2FAaacqykfK2fnuzlrH4AI3dexUpR0AqLkPPziWt99+O1OmTKl1FIYBy+MBAAAG4KIR72f//n21jsEwobQDAAAMwMj65L333suxY8dqHYVhQGkHAAAYoItH16W9vb3WMRgGlHYAAICBqryfAwcO1DoFw4DSzvC0+4V8c+4388LuvnZ4LY+fdvtw9Voen7soj/+st2378sI9i7Jobm//PZ7XHHMAhtwbWblweZ5tG6Th2zbkgX6Pvz/PLr07K7cOUhaG3IgRyZEjf6h1DIaB+nK54zFdXV/hQrRvzTez9KU5efSJWzLxLLbTHxNzyxNrckuSjgL+TCY//e3ccmXn5t0v5JluezvmABRN23PLc++m2fneo/MzaRjOz8DU1SVHjx6tdQxqpK/+XK1ePW7cuBNj1Tc0NKRcLqehoaEqg8N54cpb8u1Nt9Q6xfDimANwoZk0P4+tm1/rFNTIiBGVHD/6fq1jUCO99edq9upSqZSmpqYkntNOVb2Wx+c+kjz8YLLskbzc+eq8h9fkvhuTjuXTS7Nncdf2eXlw0325ofP1H27rGqfr9f6MmeRnj2fRss4t8x/Mmr+/oWP5+5e3ZM7T307j/1qURzYkyVtZOveHHfv87d7Tb//73j9br/Ofh8fkliv72OfE2D3HSrf5z/J4nOnPpB/H/J90fqAGLr30kiSHax2DM9n6RBas2Nzx/U1Lsv5rM3vZaX+eXbos39/e9XNLlq+7J81JWr97dx76SZLszL0Lf9Qxxpf25oH7X81nVj2UL0zqeO+uRUuSFSuzMS1ZvmpSnj6xPelYjr8yG5MkU/OVxZPz/adyYo7eMtz8rdVZMquP+Xv9DBTFiLpk1KiRtY7BMOCadqru5WWtad60Jms2rcmah+fl5WUnX6f80fZu5fSqBzv237Qmj351dx6Z+3he68+Yu1/IN5ftzp1Pd26bt/eUa6Jv+Ps1efSrVyUz7syjm9Z0ltP+b+8o1o9k91cf7Zjj6Tuze9nArr0u2jHp1z7n8HnO5GyP+dM7+z8HQLUcO3Y8H35Y6xScVtuGPLBiT76yanXWr1ud9Tfu7eU6886yPGVJxz7rVud7i/fkoYVPpDVJ89dW53uLpybTb8/31q3uszBvXLE1n163OutPKuJJV2HftfjhzvHvTzZt7uX9q5Kvd8y//KZk45oNaRvA/BTL4cPv1ToCw4DSTtXNe7jbGdkbP587Z7yVPd0K3VVf/fxH23/2r/nhtnl5sFtpm7joi5mXl9Pa7WZnpx+z2/c33tJxFvnKW/LtTd2upz4XnRm/uKjzyusr/zxzZryVLZv39XuIYh6TXvap0uc5Z30c8xf/72+qOAlA/4wcWZ8PK7VOwZntzK69nd/Omt955rubrf+W729vyfJuZXjSbbfl5mzOf/R1c7hJ8/PYuodOGuvqxX/do6x3jb81G9OSL982ofOFCfnCopZTdrt68f0nxmv+0u25entbBus+ecCFwfJ4hsTuXfuSzuXTV0756LZj+3btTmbM6XEjsomZPCPZ0u09fY95S7798J4sWrYoLye56quP5tuLqntbs327did5K4/Mffmk16/6y3Mbt6bH5MrqH7eOuatz7Ps65jMsjwdqYNTIUfng/feSaO6FNWl+HvtWWxasuDsbk1y9+OE8dqI8d2jbsyeZPrvHDd4mZMr05Kd79iezTt6/L1Mm975f7+P3//0AfVHaGWT7smdbcuXiiUlOPTM9ccqVybY92Zd0K6mnf8/J25PceF/WbLqv85rppXl8Sn+vN++fiVOuTGZU8y7nBTkmVTtuPeaugr6O+dSxf1S1OQD665KPfSwHD3jKTuHNuifr193TsVT+/mVZObnjWvEukyZPTjrPan9UrPdn1/ZkyqJzL9K9jw9w7iyPp+pefuqFE7Vy35pn8nLmpbmvMnhjc+bl5Tzyjx9drb1vzTN5ecad+Xy39/Q55s8e/+iZ4Vf+eebM6Py+xzPBuxfh3px2+43Nmbfth/nnNR9tfe0fT76+/EwKd0z62qfzjP7LL3fNvS8vPHXy2e4Bf54+nM0xP/XKQIDB19BwRerqnOcotK1PfPT880k35DPTe9ln1qzcnM156LtvnHip7bnnsnH67fmbznLfvXh37DCA57B3jv/0c/s7X3gjK1cM7G+uU+YHiDPtDIJ5f5n889xFeavjpx53He/phty36cFk7iNZtKHzpRl3nnKGtc8xb/x8Jt+zKIuWde44/8GsuTFJz+urb2zOvDzSsdx6/oNZ87dn2H7SncxvyH1P35lvfnlpFv3PzjwPr8l9/Twep83fqyE4Jn3tk4m55X/cmS1f7pr7qtz51XnJtpxkYJ+nD2dxzP9poHMAVMEnPvGJlLb/Om4SXWCz/jpTlt6dBSs6f75pSdbP6rnTzCxZtyRZuDILftL50vTbT34m+qxZuTkr89DCzZ13jx9IiJlZsur2PHD/six4KklasvxbLdm44kzv6/45eszvZnRAkrpKpVKp5vPkGhsbs3fv3jPvSM1V889q1+92Zee7z576uLBz1ssjyM4rg5H/fD8mZ2/q2KmZ8vEptY4BDEOvvLIlF9UdSv1FtU7C+aTtueW5d9Psk/9hgAvKu+URuemmm6o2ni51fujrz2mwntNueTwAwBmMHz8h73+gsXM6b2Tl0g3dlra/kf/91M5cPfcGhR04J5bHAwCcwfjx47N/354kH9Q6CoU1M0u+vjcPLLw7v+58pbe72AMMlOXxw1g1/6wOvHcg5SPurMvgari4IVdcckWtYwDD1H/+5xs58of2jBrp0W9AB8vjh6ehXh7vTDtVccUlVyhTAFzQZsy4Jq+8siWjRh6vdRQAhhHXtAMA9MPo0aMzYcKEHD3m1ycAho6/dQAA+umP//hT+aAyqtYxABhGlHYAgH6qq6vLNddcmz8cUdwBGBpKOwDAAIwdOzaTr5ySo8cVdwAGn9IOADBAU6ZMzeVjPpGjx/0qBcDgqi+VSkmS9vb2GkcBADh/XHvtn+a//3tEfvfOvowe9WGt4wAwhLp6dE/V7NVdc9Q3NTVV9XlyAADDxac+9Sd5880P8/uD72T0yGO1jgPAEOl6hnp3g/Wcdmu6AADOwbXX/mkmNk5xczoABoXSDgBwjqZMmZpr/uS6HD5ycY4eu6jWcQC4gCjtAABVMHbs2Hz60y35+Ccac/DwyBx/v67WkQC4ACjtAABVUldXl099akb+4i/mZPQl43Lk+MU5cuyivP9BrZMBcL6qr3UAAIALzejRo/NnfzYzhw8fzm9/+9u8/fb+/OHw0YweVUkqH6SuLhkxopIRdckIp1AAOA2lHQBgkFx66aWZNm1apk2blqNHj+add97JgQMHcuTIH3L06NEcP/5+Ro0amcOH36t1VOAsjBlzea0jMAwo7QAAQ2D06NFpbGxMY2NjraMAcB6xIAsAAAAKSmkHAACAglLaAQAAoKCUdgAAACgopR0AAAAKSmkHAACAglLaAQAAoKCUdgAAACgopR0AAAAKqr5cLidJur4yfMyZMyeNjY21jgEAAKTj93POD33152r16nHjxp0Yq65SqVTK5XIaGhqqMnhjY2P27t1blbEAAACgSPrqvNXs1aVSKU1NTUksjwcAAIDCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKKj6Wgegdm699fNpbd1a6xgAAECS5uZZef75f611DApGaR/GWlu3Zv261bWOAQAAJFmw8O5aR6CALI8HAACAglLaAQAAoKCUdgAAACgopR0AAAAKqr5UKiVJ2tvbaxwFAAAAiq+rR/dUzV7dNUd9U1NTyuVyGhoaqjY4AAAAXKiamppOea2avbpUKp2Yw/J4AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKKj6crmcJOn6CgAAAPStr/5crV49bty4E2PVNzQ0pFwup6GhoSqDAwAAwIWst/5czV5dKpXS1NSUxPJ4AAAAKCylHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKCilHQAAAApKaQcAAICCUtoBAACgoJR2AAAAKKj6UqmUJGlvb69xFAAAACi+rh7dUzV7ddcc9U1NTSmXy2loaKja4AAAAHChampqOuW1avbqUql0Yg7L4wEAAKCglHYAAAAoKKUdAAAACkppBwAAgIJS2gEAAKCglHYAAAAoKKUdAAAACkppBwAAgIJS2gEAAKCglHYAAAAoKKUdAAAACkppB4CqeyMrFy7Ps22DNPzWJ7Jg4RNp7efubc8tz4KFdw/oPb0b5M8FAJxCaQeAGmt7bnkWLN2QQenCbRvyyFPJV1atzvp196S5mkMPZm4AIInSDgAXtr1t+XUmZ/KkWgcBAM5Gfa0DAMB5besTWbBic8f3Ny3J+q/N7GWn/Xl26bJ8f3vXzy1Z3nnWu/W7d+ehnyTJzty78EcdY3xpbx64/9V8ZtVD+cKkpGNZ+sps7Hz3zTe19Bi/x/Zvrc6SWR1nwu99ameS5KGFmz/K17YhD9z/o/y6x/5d4+TEz12fLyfyduk1d6+fHQA4F0o7AJyttg15YMWefGXV6o5yvXVDnm2b2Vm0u3QW9ilLsv7RjlLb9tzy3LvwiY4i/LXV+d4fLc+9m2bne4/Oz6Qkadvb4/0rs2vxw1l/24QT4yUtvW9v25AH7l+eZ1c9lC/c9lDWTz61dLe2Jg+uW90x19YnsmDFE/n0AJfO95obAKg6y+MB4JzszK6ujj1rfo/CnmTrv+X721uyvNtZ6Em33Zabszn/sbWPISfNz2PrOs+yd77/y7dN6Nw4IV9Y1O1Me8/tk27IZ6bvzE9b9/eZuPm2biW7cVKuzp7scWE6ABRSfblcTpJ0fQUA+mnS/Dz2rbYsWHF3Nia5evHDeexEue7QtmdPMn12jzPREzJlevLTPfuTWSfv31Pv7++xPTs7lr93c/XcvkbsuVQ/SabmM6dNAQB011d/rlavHjdu3Imx6hsaGlIul9PQ0FCVwQFgWJl1T9avu6dzWfqyrJzc7XrwJJMmT062t6Ut6Va892fX9mTKotMX9r7f32P79AEsUe8689+1HL5tQx64/9X+vBMA6NRbf65mry6VSmlqakpieTwAnL2tT2Rl1xL3STfkM9N72WfWrNyczXnou2+ceKntueeycfrt+ZvOct+9mHfssCEPdD0PvfP9Tz/Xtdz9jaxcsfnk8bf/KI8899Fy+Nbv9v957K3/56Mb0nWtANj4s66s+/Psms29v7G33ABA1bkRHQCcrVl/nSlL786CFZ0/37Qk62f13GlmlqxbkixcmQU/6Xxp+u0nnxmfNSs3Z+VHd3j/Uo/3r7o9D9y/LAueSpKWLP9WSzau6Gt7593gT5P5K9OXnVhOf/Pi23N1us60T8gXvn57fnp/V9ap+crilmR7X2P1yO3u8QBQdXWVSqVSzdP4jY2N2bt375l3pOYaGxuzft3qWscAAACSLFh4ty51Huir81oeDwAAAMOM0g4AAAAFpbQDAABAQSntAAAAUFBKOwAAABSU0g4AAAAFpbQDAABAQSntAAAAUFBKOwAAABSU0g4AAAAFpbQDAABAQSntAAAAUFBKOwAAABSU0g4AAAAFVV8qlZIk7e3tNY4CAAAAxdfVo3uqZq/umqO+qakp5XI5DQ0NVRscAAAALlRNTU2nvFbNXl0qlU7MYXk8AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFFR9uVxOknR9BQAAAPrWV3+uVq8eN27cibHqGxoaUi6X09DQUJXBAQAA4ELWW3+uZq8ulUppampKYnk8AAAAFJbSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFFR9qVRKkrS3t9c4CkOtuXlWFiy8u9YxAACAdPx+zvmhq0f3VM1e3TVHXaVSqZTL5TQ0NFRl4MbGxuzdu7cqYwEAAECR9NV5q9mrS6VSmpqaklgeDwAAAIVV9dI+a5YlHQAAAFyY5syZM6TzVb2079y5M2+//Xa1hwUAAICa2r9/f3bs2DGkc1a9tM+cOTPvvvtutYcFAACAmmpvb8/s2bOHdM6ql/aJEyfmxRdfrPawAAAAUFMbN27MtGnThnTOqpf2lpaW/PKXv6z2sAAAAFBTv/rVr/K5z31uSOesemm/5pprctlll2Xt2rXVHhoAAABqYu3atbnssssyc+bMIZ236s9p73qe3IwZM9La2poxY8ZUZVwAAACohYMHD6a5uTnbtm3rc5/z7jntTz75ZO66667BGh4AAACGxF133ZUnn3yyJnPXD9bALS0tqVQqufXWW/ODH/zAGXcAAADOKwcPHsxdd92Vr3/962lpaalJhkE7054kc+fOzTe+8Y00Nze7xh0AAIDzxtq1a9Pc3JxvfOMbmTt3bs1yDNqZ9i4tLS3Ztm1bli5dmpdeeinXXnttPvvZz2bs2LGZMGHCYE8PAAAAZ7R///60t7dn48aNefPNN3P55Zef9hr2oTJoN6Lrzeuvv54f//jH2bFjR1pbWzNt2rRs2bKlKvMCAADA2ZgzZ0527NiR2bNnZ9q0afnc5z434LvED1avHvQz7d1df/31uf766/u171D9Q8JAyTUwcvVfETMlcg2UXP1XxEyJXAMlV/8VMVMi10Bd6LmKmCmRa6Dk6r9qZhosg3pNOwAAAHD2lHYAAAAoKKUdAAAACqruwIEDlVqHAAAAAHpRqVQqBw4cqFTL9u3bqzJOETNVKnINlFz9V8RMlYpcAyVX/xUxU6Ui10DJ1X9FzFSpyDVQF3quImaqVOQaKLn6r4iZKpWTc1keDwAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBBKe0AAABQUEo7AAAAFJTSDgAAAAWltAMAAEBB/X9zEEs4Qlav4AAAAABJRU5ErkJggg==" alt="1606296832501"></p> <p>实现步骤：</p> <ul><li>查看更多全局组件实现</li></ul> <p><code>src/components/library/xtx-more.vue</code>  定义</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>path<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xtx-more<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>查看全部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-right<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxMore'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'/'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.xtx-more</span> <span class="token punctuation">{</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token selector">span</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">i</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token selector">span,i</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><code>src/components/library/index.js</code>  注册</p> <div class="language-diff extra-class"><pre class="language-diff"><code>import XtxSkeleton from './xtx-skeleton.vue'
import XtxCarousel from './xtx-carousel.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import XtxMore from './xtx-more.vue'
</span></span>
export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> install (app) {
</span><span class="token prefix unchanged"> </span><span class="token line">   app.component(XtxSkeleton.name, XtxSkeleton)
</span><span class="token prefix unchanged"> </span><span class="token line">   app.component(XtxCarousel.name, XtxCarousel)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    app.component(XtxMore.name, XtxMore)
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}

</code></pre></div><ul><li>定义首页需要的面板组件 <code>src\views\home\components\home-panel.vue</code></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-panel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>head<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>{{ title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>small</span><span class="token punctuation">&gt;</span></span>{{ subTitle }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>small</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>right<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomePanel'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">subTitle</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-panel</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token selector">.head</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 40px 0<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
    <span class="token selector">h3</span> <span class="token punctuation">{</span>
      <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
      <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
      <span class="token property">margin-left</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 35px<span class="token punctuation">;</span>
      <span class="token selector">small</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="_20-首页主体-新鲜好物"><a href="#_20-首页主体-新鲜好物" class="header-anchor">#</a> 20-首页主体-新鲜好物</h2> <blockquote><p><strong>目的：</strong>  使用面板组件完成新鲜好物模块。</p></blockquote> <p>大致步骤：</p> <ul><li>进行组件基础布局</li> <li>封装API调用接口</li> <li>调用接口渲染组件</li></ul> <p>静态布局：<code>src\views\home\components\home-new.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-new<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜好物<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜出炉 品质靠谱<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxMore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 面板内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://yanxuan-item.nosdn.127.net/b6e1cfa68ee53719b7ab2c8e0dc20916.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>去皮去刺，辅食好选择，比目鱼纯肉250g<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;yen;">&amp;yen;</span>43.80<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeNew'</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.goods-list</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 406px<span class="token punctuation">;</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 406px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #f0f9f4<span class="token punctuation">;</span>
    .<span class="token function">hoverShadow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token selector">img</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">p</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 12px 30px 0 30px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.price</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@priceColor</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>首页组件引入： <code>src/views/home/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;page-home&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;home-entry&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;container&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;!-- 左侧分类 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;HomeCategory /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;!-- 轮播图 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;HomeBanner /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;!-- 新鲜好物 --&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;HomeNew /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import HomeCategory from './components/home-category.vue'
import HomeBanner from './components/home-banner.vue'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import HomeNew from './components/home-new.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'xtx-home-page',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { HomeCategory, HomeBanner, HomeNew }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><p>接口：<code>src/api/home.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 首页-新鲜好物
 * @param {*} limit 默认值为 4，指定响应数据中商品的数量
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findNew</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">limit <span class="token operator">=</span> <span class="token number">4</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/new'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">limit</span><span class="token operator">:</span> limit <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>调用接口渲染组件：<code>src\views\home\components\home-new.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-new<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜好物<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜出炉 品质靠谱<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 具名插槽 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxMore</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 默认插槽 - 面板内容 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.name }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;yen;">&amp;yen;</span>{{ item.price }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> findNew <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/home'</span>
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel.vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeNew'</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">findNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> result <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      list<span class="token punctuation">.</span>value <span class="token operator">=</span> result
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>**总结：**具名插槽需要配合 <code>&lt;template #名字&gt;</code>来使用。</p> <h2 id="_21-首页主体-人气推荐"><a href="#_21-首页主体-人气推荐" class="header-anchor">#</a> 21-首页主体-人气推荐</h2> <blockquote><p>目的： 完成人气推荐模块</p></blockquote> <p>大致步骤：</p> <ul><li>进行组件基础布局</li> <li>封装API调用接口</li> <li>调用接口渲染组件</li></ul> <p>落地代码：</p> <p><code>src/api/home.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 首页-人气推荐
 * @param {*} 无请求参数
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findHot</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/hot'</span><span class="token punctuation">,</span> <span class="token string">'get'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/views/home/components/home-hot.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>人气推荐<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>人气爆款 不容错过<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pannel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item.alt}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> findHot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/home'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeNew'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token function">findHot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      list<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> list <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.goods-list</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 426px<span class="token punctuation">;</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 406px<span class="token punctuation">;</span>
    .<span class="token function">hoverShadow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token selector">img</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">p</span> <span class="token punctuation">{</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
      <span class="token property">padding-top</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.desc</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><code>src/views/home/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 新鲜好物 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;HomeNew /&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;!-- 人气推荐 --&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;HomeHot /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import HomeCategory from './components/home-category.vue'
import HomeBanner from './components/home-banner'
import HomeNew from './components/home-new'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import HomeHot from './components/home-hot'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'xtx-home-page',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { HomeCategory, HomeBanner, HomeNew, HomeHot }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><h2 id="_22-首页主体-补充-vue动画"><a href="#_22-首页主体-补充-vue动画" class="header-anchor">#</a> 22-首页主体-补充-vue动画</h2> <blockquote><p><strong>目标：</strong> 知道vue中如何使用动画，知道Transition组件使用。</p></blockquote> <p>官方手册：<a href="https://v3.cn.vuejs.org/guide/transitions-enterleave.html#%E5%8D%95%E5%85%83%E7%B4%A0-%E7%BB%84%E4%BB%B6%E7%9A%84%E8%BF%87%E6%B8%A1" target="_blank" rel="noopener noreferrer">进入过渡 &amp; 离开过渡<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>当vue中，显示隐藏，创建移除，一个元素或者一个组件的时候，可以通过transition实现动画。</p> <p><img src="/erabbit-client-pc-document/assets/img/transitions.f0002fdb.svg" alt="Transition Diagram"></p> <p>如果元素或组件离开，完成一个淡出效果：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow = true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击显示盒子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow = false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>点击隐藏盒子<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 🔔Transition 动画标签注意点：只能放一个子元素或组件 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Transition</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fade<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.fade-leave-from</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 1
<span class="token punctuation">}</span>
<span class="token selector">.fade-leave-active</span> <span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fade-leave-to</span> <span class="token punctuation">{</span>
    <span class="token property">opcaity</span><span class="token punctuation">:</span> 0
<span class="token punctuation">}</span>
</code></pre></div><ul><li>进入（显示，创建）
<ul><li>v-enter-from     初始状态 （vue2.0 v-enter）</li> <li>v-enter-active   进行中</li> <li>v-enter-to         结束状态</li></ul></li> <li>离开（隐藏，移除）
<ul><li>v-leave-from      初始状态 （vue2.0 v-leave）</li> <li>v-leave-active    进行中</li> <li>v-leave-to          结束状态</li></ul></li></ul> <p>注意点：transition  只能包一个标签或者一个组件。</p> <p>小结：动画名称 name=&quot;v&quot; 为默认值，可以把修改成其他名字，可用于多个 transition 使用不同动画。</p> <h2 id="_23-首页主体-面板骨架效果"><a href="#_23-首页主体-面板骨架效果" class="header-anchor">#</a> 23-首页主体-面板骨架效果</h2> <blockquote><p><strong>目的：</strong> 加上面板的骨架加载效果</p></blockquote> <p>定义一个骨架布局组件：</p> <p><code>src/views/home/components/home-skeleton.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-skeleton<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: bg }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxSkeleton</span> <span class="token attr-name">bg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#e4e4e4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>306px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>306px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">animated</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxSkeleton</span> <span class="token attr-name">bg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#e4e4e4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>160px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">animated</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxSkeleton</span> <span class="token attr-name">bg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#e4e4e4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>120px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24px<span class="token punctuation">&quot;</span></span> <span class="token attr-name">animated</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeSkeleton'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">bg</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#fff'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-skeleton</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1240px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 406px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token selector">.item</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 306px<span class="token punctuation">;</span>
    <span class="token selector">.xtx-skeleton ~ .xtx-skeleton</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 16px auto 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>在 <code>home-hot</code> <code>home-new</code> 组件分别使用</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;HomePanel title=&quot;人气推荐&quot; sub-title=&quot;人气爆款 不容错过&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;Transition name=&quot;fade&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;ul v-if=&quot;goods.length&quot; ref=&quot;pannel&quot; class=&quot;goods-list&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;li v-for=&quot;item in goods&quot; :key=&quot;item.id&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;RouterLink to=&quot;/&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;name&quot;&gt;{{item.title}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;desc&quot;&gt;{{item.alt}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">        &lt;/ul&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">       &lt;HomeSkeleton v-else /&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/Transition&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/HomePanel&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code>
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;HomePanel title=&quot;新鲜好物&quot; sub-title=&quot;新鲜出炉 品质靠谱&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;template #right&gt;&lt;XtxMore /&gt;&lt;/template&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;Transition name=&quot;fade&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;ul v-if=&quot;goods.length&quot; ref=&quot;pannel&quot; class=&quot;goods-list&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;li v-for=&quot;item in goods&quot; :key=&quot;item.id&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;RouterLink to=&quot;/&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;img :src=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;name&quot;&gt;{{item.name}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;p class=&quot;price&quot;&gt;&amp;yen;{{item.price}}&lt;/p&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/ul&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;HomeSkeleton v-else /&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/Transition&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;/HomePanel&gt;
</span></span></code></pre></div><p>在 <code>src/assets/styles/common.less</code> 定义动画</p> <div class="language-less extra-class"><pre class="language-less"><code><span class="token selector">.fade</span> <span class="token punctuation">{</span>
  <span class="token selector">&amp;-leave-active</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.5s 0.2s<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;-leave-to</span> <span class="token punctuation">{</span>
    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_24-首页主体-组件数据懒加载"><a href="#_24-首页主体-组件数据懒加载" class="header-anchor">#</a> 24-首页主体-组件数据懒加载</h2> <blockquote><p><strong>目的：</strong>  实现当组件进入可视区域在加载数据。</p></blockquote> <p>我们可以使用 <code>@vueuse/core</code> 中的 <code>useIntersectionObserver</code> 来实现监听进入可视区域行为，但是必须配合vue3.0的组合API的方式才能实现。</p> <p><strong>大致步骤：</strong></p> <ul><li>理解 <code>useIntersectionObserver</code>  的使用，各个参数的含义</li> <li>改造 home-new 组件成为数据懒加载，掌握 <code>useIntersectionObserver</code>  函数的用法</li> <li>封装 <code>useLazyData</code> 函数，作为数据懒加载公用函数</li> <li>把 <code>home-new</code> 和 <code>home-hot</code> 改造成懒加载方式</li></ul> <p><strong>落的代码：</strong></p> <ol><li>先分析下这个<code>useIntersectionObserver</code> 函数：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// stop 是停止观察是否进入或移出可视区域的行为    </span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> stop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span>
  <span class="token comment">// target 是观察的目标dom容器，必须是dom容器，而且是vue3.0方式绑定的dom对象</span>
  target<span class="token punctuation">,</span>
  <span class="token comment">// isIntersecting 是否进入可视区域，true是进入 false是移出</span>
  <span class="token comment">// observerElement 被观察的dom</span>
  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> observerElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在此处可根据isIntersecting来判断，然后做业务</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>开始改造 <code>home-new</code> 组件：<code>rc/views/home/components/home-new.vue</code></li></ol> <ul><li>进入可视区后获取数据</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜好物<span class="token punctuation">&quot;</span></span> <span class="token attr-name">subTitle</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新鲜出炉 品质靠谱<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
// 省略。。。
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel'</span>
<span class="token keyword">import</span> HomeSkeleton <span class="token keyword">from</span> <span class="token string">'./home-skeleton'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> findNew <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/home'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useIntersectionObserver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeNew'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel<span class="token punctuation">,</span> HomeSkeleton <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> stop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span>
      target<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">findNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            goods<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> target <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>由于首页面板数据加载都需要实现懒数据加载，所以封装一个钩子函数，得到数据。</li></ol> <p><code>src/hooks/index.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// hooks(钩子)封装逻辑，提供响应式数据。</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useIntersectionObserver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>

<span class="token comment">// 数据懒加载函数</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useLazyData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">apiFn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 被观察的对象</span>
  <span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
  <span class="token comment">// 2. 用于存放后台数据的变量</span>
  <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token comment">// stop             用于停止检测函数</span>
  <span class="token comment">// target           被检测的元素</span>
  <span class="token comment">// isIntersecting   布尔值，元素是否可见 true/false</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> stop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span>
    target<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果元素可以，发送请求获取数据，并停止检测避免重复发送请求</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token string">'元素可见可以发请求了.....'</span><span class="token punctuation">)</span>
        <span class="token comment">// 调用 API 获取数据</span>
        <span class="token function">apiFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> result <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          list<span class="token punctuation">.</span>value <span class="token operator">=</span> result
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
  <span class="token comment">// 钩子函数返回---&gt; 响应式数据（目标元素, 后台数据）</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> list<span class="token punctuation">,</span> target <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>再次改造  <code>home-new</code> 组件：<code>rc/views/home/components/home-new.vue</code></li></ol> <div class="language-diff extra-class"><pre class="language-diff"><code>import { findNew } from '@/api/home'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { useLazyData } from '@/hooks'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeNew',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: { HomePanel, HomeSkeleton },
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const { target, list } = useLazyData(findNew)
</span><span class="token prefix inserted">+</span><span class="token line">    return { target, list }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   &lt;HomePanel ref=&quot;target&quot; title=&quot;新鲜好物&quot; subTitle=&quot;新鲜出炉 品质靠谱&quot;&gt;
</span></span></code></pre></div><ol start="5"><li>然后改造  <code>home-hot</code> 组件：<code>src/views/home/components/home-hot.vue</code></li></ol> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;HomePanel ref=&quot;target&quot; title=&quot;人气推荐&quot; subTitle=&quot;人气爆款 不容错过&quot;&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code>import { findHot } from '@/api/home'
import HomePanel from './home-panel'
import HomeSkeleton from './home-skeleton'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { useLazyData } from '@/hooks'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeHot',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: { HomePanel, HomeSkeleton },
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const { target, list } = useLazyData(findHot)
</span><span class="token prefix inserted">+</span><span class="token line">    return { target, list }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><h2 id="_25-首页主体-热门品牌"><a href="#_25-首页主体-热门品牌" class="header-anchor">#</a> 25-首页主体-热门品牌</h2> <blockquote><p><strong>目的：</strong>  实现品牌的展示，和切换品牌效果。</p></blockquote> <p><strong>基本步骤：</strong></p> <ul><li>准备基础布局组件</li> <li>获取数据实现渲染，完成切换效果</li> <li>加上骨架效果和数据懒加载</li></ul> <p><strong>落的代码：</strong></p> <ol><li>基础结构：<code>src/views/home/components/home-brand.vue</code></li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>热门品牌<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>国际经典 品质保证<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-left prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-right next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 10<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/brand_goods_1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeBrand'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-panel</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span>#f5f5f5
<span class="token punctuation">}</span>
<span class="token selector">.iconfont</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
  <span class="token selector">&amp;::before</span> <span class="token punctuation">{</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -2px
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;.disabled</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> not-allowed<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 345px<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token selector">.list</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 200%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all 1s<span class="token punctuation">;</span>
    <span class="token selector">li</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
      <span class="token selector">&amp;:nth-child(5n)</span> <span class="token punctuation">{</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 305px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ul><li>使用组件：<code>src/views/home/index.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 人气推荐 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;HomeHot /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 热门品牌 --&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   &lt;HomeBrand /&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import HomeBrand from './components/home-brand'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'xtx-home-page',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { HomeCategory, HomeBanner, HomeNew, HomeHot, HomeBrand }
</span></span>}
</code></pre></div><ol start="2"><li>获取数据和切换效果：</li></ol> <ul><li>由于最后会使用到数据懒加载，那么我们也会使用组合API实现。</li> <li>业务上，只有两页数据切换，0---&gt;1 或者 1---&gt;0 的方式。</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>热门品牌<span class="token punctuation">&quot;</span></span> <span class="token attr-name">sub-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>国际经典 品质保证<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeIndex = 0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ disabled: activeIndex === 0  }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-left prev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeIndex = 1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ disabled: activeIndex === 1  }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>javascript:;<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-angle-right next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`transform: translateX(${ activeIndex ? '-50%' : 0 });`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in brands<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.picture<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> findBrand <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/home'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useLazyData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/hooks'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeBrand'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取数据</span>
     <span class="token keyword">const</span> brands <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token function">findBrand</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
       brands<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result
     <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 切换效果，前提只有 0 1 两页</span>
    <span class="token keyword">const</span> activeIndex <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> brands<span class="token punctuation">,</span> activeIndex <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>加上数据懒加载和骨架效果</li></ol> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;HomePanel ref=&quot;target&quot; title=&quot;热门品牌&quot; sub-title=&quot;国际经典 品质保证&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;template #right&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;a @click=&quot;activeIndex = 0&quot; :class=&quot;{ disabled: activeIndex === 0  }&quot; href=&quot;javascript:;&quot; class=&quot;iconfont icon-angle-left prev&quot;&gt;&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;a @click=&quot;activeIndex = 1&quot; :class=&quot;{ disabled: activeIndex === 1  }&quot; href=&quot;javascript:;&quot; class=&quot;iconfont icon-angle-right next&quot;&gt;&lt;/a&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/template&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;box&quot; ref=&quot;box&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;Transition name=&quot;fade&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;ul 
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">           v-if=&quot;result.length&quot; 
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">           class=&quot;list&quot; 
</span><span class="token prefix unchanged"> </span><span class="token line">           :style=&quot;`transform: translateX(${ activeIndex ? '-50%' : 0 });`&quot;
</span></span>		&gt;
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;li v-for=&quot;item in result&quot; :key=&quot;item.id&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;RouterLink to=&quot;/&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;!-- 图片懒加载应用 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">             &lt;img v-lazy=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/ul&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">        &lt;!-- 🔔开发的时候可以先把所需的骨架屏写完，后面再添加 v-if 和 v-else --&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;div v-else class=&quot;skeleton&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;XtxSkeleton class=&quot;item&quot; v-for=&quot;i in 5&quot; :key=&quot;i&quot; width=&quot;240px&quot; height=&quot;305px&quot;  bg=&quot;#e4e4e4&quot;&gt;&lt;/XtxSkeleton&gt;
</span><span class="token prefix inserted">+</span><span class="token line">        &lt;/div&gt;
</span><span class="token prefix inserted">+</span><span class="token line">      &lt;/Transition&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/HomePanel&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import HomePanel from './home-panel'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { findBrand } from '@/api/home'
</span><span class="token prefix inserted">+</span><span class="token line">import { useLazyData } from '@/hooks'
</span><span class="token prefix inserted">+</span><span class="token line">import { ref } from 'vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeBrand',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: { HomePanel },
</span><span class="token prefix unchanged"> </span><span class="token line"> setup () {
</span><span class="token prefix unchanged"> </span><span class="token line">   // 调用懒加载函数，获取数据
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const { result, target } = useLazyData(findBrand)
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   // 用于切换的下标
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    const activeIndex = ref(0)
</span></span>
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    return { result, target, activeIndex }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">style scoped lang=&quot;less&quot;&gt;
</span></span>.skeleton {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> width: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> display: flex;
</span></span>}
.home-panel {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> background:#f5f5f5
</span></span>}
.iconfont {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> width: 20px;
</span><span class="token prefix unchanged"> </span><span class="token line"> height: 20px;
</span><span class="token prefix unchanged"> </span><span class="token line"> background: #ccc;
</span><span class="token prefix unchanged"> </span><span class="token line"> color: #fff;
</span><span class="token prefix unchanged"> </span><span class="token line"> display: inline-block;
</span><span class="token prefix unchanged"> </span><span class="token line"> text-align: center;
</span><span class="token prefix unchanged"> </span><span class="token line"> margin-left: 5px;
</span><span class="token prefix unchanged"> </span><span class="token line"> background: @xtxColor;
</span><span class="token prefix unchanged"> </span><span class="token line"> &amp;::before {
</span><span class="token prefix unchanged"> </span><span class="token line">   font-size: 12px;
</span><span class="token prefix unchanged"> </span><span class="token line">   position: relative;
</span><span class="token prefix unchanged"> </span><span class="token line">   top: -2px
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span><span class="token prefix unchanged"> </span><span class="token line"> // 小箭头禁用状态
</span><span class="token prefix unchanged"> </span><span class="token line"> &amp;.disabled {
</span><span class="token prefix unchanged"> </span><span class="token line">   background: #ccc;
</span><span class="token prefix unchanged"> </span><span class="token line">   cursor: not-allowed;
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
.box {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> display: flex;
</span><span class="token prefix unchanged"> </span><span class="token line"> width: 100%;
</span><span class="token prefix unchanged"> </span><span class="token line"> height: 345px;
</span><span class="token prefix unchanged"> </span><span class="token line"> overflow: hidden;
</span><span class="token prefix unchanged"> </span><span class="token line"> padding-bottom: 40px;
</span><span class="token prefix unchanged"> </span><span class="token line"> .list {
</span><span class="token prefix unchanged"> </span><span class="token line">   width: 200%;
</span><span class="token prefix unchanged"> </span><span class="token line">   display: flex;
</span><span class="token prefix unchanged"> </span><span class="token line">   // 盒子位移的时候有过渡效果
</span><span class="token prefix unchanged"> </span><span class="token line">   transition: all 1s;
</span><span class="token prefix unchanged"> </span><span class="token line">   li {
</span><span class="token prefix unchanged"> </span><span class="token line">     margin-right: 10px;
</span><span class="token prefix unchanged"> </span><span class="token line">     width: 240px;
</span><span class="token prefix unchanged"> </span><span class="token line">     &amp;:nth-child(5n) {
</span><span class="token prefix unchanged"> </span><span class="token line">       margin-right: 0;
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">     img {
</span><span class="token prefix unchanged"> </span><span class="token line">       width: 240px;
</span><span class="token prefix unchanged"> </span><span class="token line">       height: 305px;
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   }
</span><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/style&gt;
</span></span></code></pre></div><div class="language-less extra-class"><pre class="language-less"><code>  <span class="token selector">.skeleton</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token selector">.item</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token selector">&amp;:nth-child(5n)</span> <span class="token punctuation">{</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong>  注意下useLazyData传参的情况。</p> <h2 id="_26-首页主体-图片懒加载"><a href="#_26-首页主体-图片懒加载" class="header-anchor">#</a> 26-首页主体-图片懒加载</h2> <blockquote><p><strong>目的：</strong> 当图片进入可视区域内去加载图片，且处理加载失败，封装成指令。</p></blockquote> <p>基于vue3.0和 useIntersectionObserver 封装懒加载指令</p> <p><code>src/components/library/index.js</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> defaultImg <span class="token keyword">from</span> <span class="token string">'@/assets/images/200.png'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useIntersectionObserver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>
<span class="token comment">// 指令</span>
<span class="token keyword">const</span> <span class="token function-variable function">defineDirective</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'lazy'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 标签或组件挂载到页面中（就是 Vue2 insert 插入节点）</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// stop 是一个函数，用于停止检测元素可见性</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> stop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span>
        el<span class="token punctuation">,</span>
        <span class="token comment">// isIntersecting 布尔值，元素可见为 true，元素不可见为 false</span>
        <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> observerElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// 图片标签是否可见</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 如果目标可见，替换图片地址，自动加载图片</span>
            el<span class="token punctuation">.</span>src <span class="token operator">=</span> value
            <span class="token comment">// 如果图片地址是错误的，无法加载图片，显示占位图</span>
            el<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              el<span class="token punctuation">.</span>src <span class="token operator">=</span> defaultImg
            <span class="token punctuation">}</span>
            <span class="token comment">// 主动停止检测元素可见性</span>
            <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> install (app) {
</span><span class="token prefix unchanged"> </span><span class="token line">   app.component(XtxSkeleton.name, XtxSkeleton)
</span><span class="token prefix unchanged"> </span><span class="token line">   app.component(XtxCarousel.name, XtxCarousel)
</span><span class="token prefix unchanged"> </span><span class="token line">   app.component(XtxMore.name, XtxMore)
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    defineDirective(app)
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> }
</span></span>}
</code></pre></div><p>使用指令：</p> <p><code>src/views/home/component/home-product.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;img alt=&quot;&quot; v-lazy=&quot;cate.picture&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;strong class=&quot;label&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;span&gt;{{cate.name}}馆&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;span&gt;{{cate.saleInfo}}&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/strong&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/RouterLink&gt;
</span></span></code></pre></div><p><code>src/views/home/component/home-goods.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;RouterLink to=&quot;/&quot; class=&quot;image&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;img alt=&quot;&quot; v-lazy=&quot;goods.picture&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/RouterLink&gt;
</span></span></code></pre></div><p>``src/views/home/component/home-product.vue`</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;img v-lazy=&quot;item.picture&quot; alt=&quot;&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;strong class=&quot;label&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;span&gt;{{item.name}}馆&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">           &lt;span&gt;{{item.saleInfo}}&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">         &lt;/strong&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/RouterLink&gt;
</span></span></code></pre></div><p>补充介绍一个原生 webAPI：<a href="https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/IntersectionObserver" target="_blank" rel="noopener noreferrer">IntersectionObserver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建观察对象实例</span>
<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// callback 被观察dom进入可视区离开可视区都会触发</span>
<span class="token comment">// - 两个回调参数 entries , observer</span>
<span class="token comment">// - entries 被观察的元素信息对象的数组 [{元素信息},{}]，信息中isIntersecting判断进入或离开</span>
<span class="token comment">// - observer 就是观察实例</span>
<span class="token comment">// options 配置参数</span>
<span class="token comment">// - 三个配置属性 root rootMargin threshold</span>
<span class="token comment">// - root 基于的滚动容器，默认是document</span>
<span class="token comment">// - rootMargin 容器有没有外边距</span>
<span class="token comment">// - threshold 交叉的比例</span>

<span class="token comment">// 实例提供两个方法</span>
<span class="token comment">// observe(dom) 观察哪个dom</span>
<span class="token comment">// unobserve(dom) 停止观察那个dom</span>
</code></pre></div><p>使用原生 WebAPI 的 <code>IntersectionObserver</code> 写法参考</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> defaultImg <span class="token keyword">from</span> <span class="token string">'@/assets/images/200.png'</span>
<span class="token comment">// 指令</span>
<span class="token keyword">const</span> <span class="token function-variable function">defineDirective</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 图片懒加载指令</span>
  app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'lazy'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
          el<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              el<span class="token punctuation">.</span>src <span class="token operator">=</span> defaultImg
          <span class="token punctuation">}</span>  
          el<span class="token punctuation">.</span>src <span class="token operator">=</span> binding<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">0.01</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>总结：</strong></p> <ul><li>在 img 上使用使用v-lazy值为图片地址，不设置src属性。</li></ul> <h2 id="_27-首页主体-商品区块"><a href="#_27-首页主体-商品区块" class="header-anchor">#</a> 27-首页主体-商品区块</h2> <blockquote><p><strong>目的：</strong>  完成商品区域展示。</p></blockquote> <p><strong>大致步骤：</strong></p> <ul><li>准备一个商品盒子组件 <code>home-goods</code>  展示单个商品</li> <li>定义产品区块组件 <code>home-product</code> 使用 <code>home-goods</code>  完成基础布局</li> <li>在首页中使用 <code>home-product</code> 组件</li> <li>定义API函数，获取数据，进行渲染</li> <li>处理板块需要进入可视区太多内容才能加载数据问题。</li></ul> <p><strong>落地代码：</strong></p> <ol><li>单个商品组件：<code>src/views/home/components/home-goods.vue</code></li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/fresh_goods_1.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name ellipsis-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>美威 智利原味三文鱼排 240g/袋 4片装<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>desc ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>海鲜年货<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;yen;">&amp;yen;</span>108.00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>extra<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>找相似<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>发现现多宝贝 <span class="token entity named-entity" title="&gt;">&amp;gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeGoods'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.goods-item</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px 30px<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>
  <span class="token selector">.image</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 160px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
    <span class="token selector">img</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">p</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
    <span class="token selector">&amp;.name</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;.desc</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;.price</span> <span class="token punctuation">{</span>
      <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@priceColor</span><span class="token punctuation">;</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.extra</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 86px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>100%<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> all .5s<span class="token punctuation">;</span>
    <span class="token selector">span</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
      <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
      <span class="token selector">&amp;:first-child</span> <span class="token punctuation">{</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">border-bottom</span><span class="token punctuation">:</span>1px solid #fff<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
        <span class="token property">margin-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
    <span class="token selector">.extra</span> <span class="token punctuation">{</span>
      <span class="token property">transform</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><ol start="2"><li>产品区块组件：<code>src/views/home/components/home-product.vue</code></li></ol> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>home-product<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>生鲜<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 4<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>海鲜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>水果<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>蔬菜<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>水产<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>禽肉<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxMore</span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/fresh_goods_cover.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>生鲜馆<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>全场3件7折<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goods-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 8<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomeGoods</span> <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel'</span>
<span class="token keyword">import</span> HomeGoods <span class="token keyword">from</span> <span class="token string">'./home-goods'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeProduct'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel<span class="token punctuation">,</span> HomeGoods <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-product</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 2900px<span class="token punctuation">;</span>
  <span class="token selector">.sub</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 2px 12px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token property">background</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@xtxColor</span><span class="token punctuation">;</span></span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.box</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token selector">.cover</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 610px<span class="token punctuation">;</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.label</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 188px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 66px<span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token property">line-height</span><span class="token punctuation">:</span> 66px<span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate3d</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>-50%<span class="token punctuation">,</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token selector">span</span> <span class="token punctuation">{</span>
          <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
          <span class="token selector">&amp;:first-child</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 76px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.9<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">&amp;:last-child</span> <span class="token punctuation">{</span>
            <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>0<span class="token punctuation">,</span>.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.goods-list</span> <span class="token punctuation">{</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 990px<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
      <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
      <span class="token selector">li</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
        <span class="token selector">&amp;:nth-last-child(-n+4)</span> <span class="token punctuation">{</span>
          <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">&amp;:nth-child(4n)</span> <span class="token punctuation">{</span>
          <span class="token property">margin-right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ol start="3"><li>使用组件：<code>src/views/home/index.vue</code></li></ol> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 人气推荐 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;HomeHot /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 热门品牌 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;HomeBrand /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 商品区域 --&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;HomeProduct /&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import HomeProduct from './components/home-product.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'xtx-home-page',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { HomeCategory, HomeBanner, HomeNew, HomeHot, HomeBrand, HomeProduct }
</span></span>}
</code></pre></div><ol start="4"><li>获取数据渲染：</li></ol> <ul><li>定义API <code>src/api/home.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 首页-产品区块
 * @param {*} 无请求参数
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findGoods</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/goods'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>进行渲染</li></ul> <p><code>src/views/home/components/home-product.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;home-product&quot; ref=&quot;target&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;HomePanel :title=&quot;cate.name&quot; v-for=&quot;cate in list&quot; :key=&quot;cate.id&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">     &lt;template #right&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;div class=&quot;sub&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;RouterLink v-for=&quot;sub in cate.children&quot; :key=&quot;sub.id&quot; to=&quot;/&quot;&gt;{{sub.name}}&lt;/RouterLink&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;XtxMore /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/template&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;div class=&quot;box&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;RouterLink class=&quot;cover&quot; to=&quot;/&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;img :src=&quot;cate.picture&quot; alt=&quot;&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;strong class=&quot;label&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">            &lt;span&gt;{{cate.name}}馆&lt;/span&gt;
</span><span class="token prefix inserted">+</span><span class="token line">            &lt;span&gt;{{cate.saleInfo}}&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;/strong&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;ul class=&quot;goods-list&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;li v-for=&quot;item in cate.goods&quot; :key=&quot;item.id&quot;&gt;
</span><span class="token prefix inserted">+</span><span class="token line">            &lt;HomeGoods :goods=&quot;item&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;/li&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/ul&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/HomePanel&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import HomePanel from './home-panel'
import HomeGoods from './home-goods'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { findGoods } from '@/api/home'
</span><span class="token prefix inserted">+</span><span class="token line">import { useLazyData } from '@/hooks'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeProduct',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: { HomePanel, HomeGoods },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  setup () {
</span><span class="token prefix inserted">+</span><span class="token line">    const { target, list } = useLazyData(findGoods)
</span><span class="token prefix inserted">+</span><span class="token line">    return { target, list }
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><p><code>src/views/home/components/home-goods.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> &lt;div class=&quot;goods-item&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;RouterLink to=&quot;/&quot; class=&quot;image&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;img :src=&quot;goods.picture&quot; alt=&quot;&quot; /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;/RouterLink&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;p class=&quot;name ellipsis-2&quot;&gt;{{goods.name}}&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;p class=&quot;desc ellipsis&quot;&gt;{{goods.tag}}&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">    &lt;p class=&quot;price&quot;&gt;&amp;yen;{{goods.price}}&lt;/p&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;extra&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;RouterLink to=&quot;/&quot;&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;span&gt;找相似&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;span&gt;发现现多宝贝 &amp;gt;&lt;/span&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/div&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeGoods',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  props: {
</span><span class="token prefix inserted">+</span><span class="token line">    goods: {
</span><span class="token prefix inserted">+</span><span class="token line">      type: Object,
</span><span class="token prefix inserted">+</span><span class="token line">      default: () =&gt; ({})
</span><span class="token prefix inserted">+</span><span class="token line">    }
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div><ol start="5"><li>处理问题：</li></ol> <ul><li>产品区域需要滚动比较多才能去加载数据。</li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> const { stop } = useIntersectionObserver(
</span><span class="token prefix unchanged"> </span><span class="token line">   container,
</span><span class="token prefix unchanged"> </span><span class="token line">   ([{ isIntersecting }], dom) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">     if (isIntersecting) {
</span><span class="token prefix unchanged"> </span><span class="token line">       stop()
</span><span class="token prefix unchanged"> </span><span class="token line">       apiFn &amp;&amp; apiFn().then(({ result }) =&gt; {
</span><span class="token prefix unchanged"> </span><span class="token line">         data.value = result
</span><span class="token prefix unchanged"> </span><span class="token line">       })
</span><span class="token prefix unchanged"> </span><span class="token line">     }
</span><span class="token prefix unchanged"> </span><span class="token line">   },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">   { threshold: [0] }
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> )  
</span></span></code></pre></div><ul><li>threshold 容器和可视区交叉的占比（进入的面积/容器完整面试） 取值，0-1 之间，默认比0大，所以需要滚动较多才能触发进入可视区域事件。</li></ul> <h2 id="_28-首页主体-最新专题"><a href="#_28-首页主体-最新专题" class="header-anchor">#</a> 28-首页主体-最新专题</h2> <blockquote><p><strong>目的：</strong>  完成最新专题展示。</p></blockquote> <p>基础布局：<code>src/views/home/components/home-special.vue</code></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HomePanel</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>最新专题<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#right</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>XtxMore</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>special-list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>special-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in 3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouterLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
            <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://zhoushugang.gitee.io/erabbit-client-pc-static/uploads/topic_goods_1.jpg<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">alt</span>
          <span class="token punctuation">/&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>meta<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>top ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>看到撒娇的撒娇的凯撒就<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sub ellipsis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>倒萨倒萨倒萨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>price<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&amp;yen;">&amp;yen;</span>19.99起<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RouterLink</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>foot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>like<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-hart1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-see<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-message<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HomePanel</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HomePanel <span class="token keyword">from</span> <span class="token string">'./home-panel.vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeSpecial'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> HomePanel <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.home-panel</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.special-list</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 380px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token selector">.special-item</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 404px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    .<span class="token function">hoverShadow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token selector">a</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 288px<span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token selector">img</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.meta</span> <span class="token punctuation">{</span>
        <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
          to top<span class="token punctuation">,</span>
          <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">,</span>
          transparent 50%
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 288px<span class="token punctuation">;</span>
        <span class="token selector">.title</span> <span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">bottom</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token property">padding-left</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
          <span class="token property">width</span><span class="token punctuation">:</span> 70%<span class="token punctuation">;</span>
          <span class="token property">height</span><span class="token punctuation">:</span> 70px<span class="token punctuation">;</span>
          <span class="token selector">.top</span> <span class="token punctuation">{</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token selector">.sub</span> <span class="token punctuation">{</span>
            <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 19px<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.price</span> <span class="token punctuation">{</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">bottom</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
          <span class="token property">right</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
          <span class="token property">line-height</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
          <span class="token property">padding</span><span class="token punctuation">:</span> 4px 8px 4px 7px<span class="token punctuation">;</span>
          <span class="token property">color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@priceColor</span><span class="token punctuation">;</span></span>
          <span class="token property">font-size</span><span class="token punctuation">:</span> 17px<span class="token punctuation">;</span>
          <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
          <span class="token property">border-radius</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token selector">.foot</span> <span class="token punctuation">{</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 72px<span class="token punctuation">;</span>
      <span class="token property">line-height</span><span class="token punctuation">:</span> 72px<span class="token punctuation">;</span>
      <span class="token property">padding</span><span class="token punctuation">:</span> 0 20px<span class="token punctuation">;</span>
      <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>

      <span class="token selector">i</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.like,
      .view</span> <span class="token punctuation">{</span>
        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
        <span class="token property">margin-right</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.reply</span> <span class="token punctuation">{</span>
        <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
        <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>使用组件：<code>src/views/home/index.vue</code></p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 商品区域 --&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;HomeProduct /&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;!-- 最新专题 --&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">    &lt;HomeSpecial /&gt;
</span></span></code></pre></div><div class="language-diff extra-class"><pre class="language-diff"><code><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import HomeSpecial from './components/home-special.vue'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'xtx-home-page',
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  components: { HomeCategory, HomeBanner, HomeNew, HomeHot, HomeBrand, HomeProduct, HomeSpecial }
</span></span>}
</code></pre></div><p>获取数据：</p> <ul><li>定义API <code>src/api/home.js</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 首页-最新专题
 * @param {*} 无请求参数
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">findSpecial</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token string">'/home/special'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>渲染组件 <code>src/views/home/components/home-speical.vue</code></li></ul> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">template&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  &lt;HomePanel title=&quot;最新专题&quot; ref=&quot;target&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">   &lt;template #right&gt;&lt;XtxMore /&gt;&lt;/template&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;div class=&quot;special-list&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">      &lt;div class=&quot;special-item&quot; v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;RouterLink to=&quot;/&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;img :src=&quot;item.cover&quot; alt /&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;div class=&quot;meta&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">            &lt;p class=&quot;title&quot;&gt;{{item.title}}&lt;small&gt;{{item.summary}}&lt;/small&gt;&lt;/p&gt;
</span><span class="token prefix inserted">+</span><span class="token line">            &lt;span class=&quot;price&quot;&gt;&amp;yen;{{item.lowestPrice}}起&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">         &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;/RouterLink&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">       &lt;div class=&quot;foot&quot;&gt;
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;like&quot;&gt;&lt;i class=&quot;iconfont icon-hart1&quot;&gt;&lt;/i&gt;{{item.collectNum}}&lt;/span&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;view&quot;&gt;&lt;i class=&quot;iconfont icon-see&quot;&gt;&lt;/i&gt;{{item.viewNum}}&lt;/span&gt;
</span><span class="token prefix inserted">+</span><span class="token line">          &lt;span class=&quot;reply&quot;&gt;&lt;i class=&quot;iconfont icon-message&quot;&gt;&lt;/i&gt;{{item.replyNum}}&lt;/span&gt;
</span></span><span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line">       &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">     &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line">   &lt;/div&gt;
</span><span class="token prefix unchanged"> </span><span class="token line"> &lt;/HomePanel&gt;
</span></span><span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/template&gt;
</span></span>
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">script&gt;
</span></span>import HomePanel from './home-panel'
<span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">import { findSpecial } from '@/api/home'
</span><span class="token prefix inserted">+</span><span class="token line">import { useLazyData } from '@/hooks'
</span></span>export default {
<span class="token unchanged"><span class="token prefix unchanged"> </span><span class="token line"> name: 'HomeSpecial',
</span><span class="token prefix unchanged"> </span><span class="token line"> components: { HomePanel },
</span></span><span class="token inserted-sign inserted"><span class="token prefix inserted">+</span><span class="token line">  setup () {
</span><span class="token prefix inserted">+</span><span class="token line">    const { target, list } = useLazyData(findSpecial)
</span><span class="token prefix inserted">+</span><span class="token line">    return { target, list }
</span><span class="token prefix inserted">+</span><span class="token line">  }
</span></span>}
<span class="token deleted-arrow deleted"><span class="token prefix deleted">&lt;</span><span class="token line">/script&gt;
</span></span></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/erabbit-client-pc-document/assets/js/app.89bf0df2.js" defer></script><script src="/erabbit-client-pc-document/assets/js/2.9c06a25d.js" defer></script><script src="/erabbit-client-pc-document/assets/js/6.9b8cde68.js" defer></script>
  </body>
</html>
